module.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=18)}([function(e,t){e.exports=require("crypto")},function(e,t,i){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t){e.exports=require("fs")},function(e,t,i){"use strict";const n=i(31),s=i(4),r=i(34),{kStatusCode:o,NOOP:a}=i(1),c=Buffer.from([0,0,255,255]),h=Symbol("permessage-deflate"),l=Symbol("total-length"),f=Symbol("callback"),d=Symbol("buffers"),u=Symbol("error");let p;function _(e){this[d].push(e),this[l]+=e.length}function g(e){this[l]+=e.length,this[h]._maxPayload<1||this[l]<=this[h]._maxPayload?this[d].push(e):(this[u]=new RangeError("Max payload size exceeded"),this[u][o]=1009,this.removeListener("data",g),this.reset())}function m(e){this[h]._inflate=null,e[o]=1007,this[f](e)}e.exports=class{constructor(e,t,i){if(this._maxPayload=0|i,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new r(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[f];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,i=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(i.server_no_context_takeover=!0),t.clientNoContextTakeover&&(i.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(i.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?i.client_max_window_bits=t.clientMaxWindowBits:!0!==i.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete i.client_max_window_bits,i}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let i=e[t];if(i.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(i=i[0],"client_max_window_bits"===t){if(!0!==i){const e=+i;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${i}`);i=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${i}`)}else if("server_max_window_bits"===t){const e=+i;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${i}`);i=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==i)throw new TypeError(`Invalid value for parameter "${t}": ${i}`)}e[t]=i})}),e}decompress(e,t,i){p.add(n=>{this._decompress(e,t,(e,t)=>{n(),i(e,t)})})}compress(e,t,i){p.add(n=>{this._compress(e,t,(e,t)=>{n(),i(e,t)})})}_decompress(e,t,i){const r=this._isServer?"client":"server";if(!this._inflate){const e=`${r}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[h]=this,this._inflate[l]=0,this._inflate[d]=[],this._inflate.on("error",m),this._inflate.on("data",g)}this._inflate[f]=i,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[u];if(e)return this._inflate.close(),this._inflate=null,void i(e);const n=s.concat(this._inflate[d],this._inflate[l]);t&&this.params[`${r}_no_context_takeover`]?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[d]=[]),i(null,n)})}_compress(e,t,i){const r=this._isServer?"server":"client";if(!this._deflate){const e=`${r}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[d]=[],this._deflate.on("error",a),this._deflate.on("data",_)}this._deflate[f]=i,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=s.concat(this._deflate[d],this._deflate[l]);t&&(e=e.slice(0,e.length-4)),this._deflate[f]=null,t&&this.params[`${r}_no_context_takeover`]?(this._deflate.close(),this._deflate=null):(this._deflate[l]=0,this._deflate[d]=[]),i(null,e)})}}},function(e,t,i){"use strict";const{EMPTY_BUFFER:n}=i(1);function s(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const i=Buffer.allocUnsafe(t);let s=0;for(let t=0;t<e.length;t++){const n=e[t];i.set(n,s),s+=n.length}return s<t?i.slice(0,s):i}function r(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[r]^t[3&r]}function o(e,t){const i=e.length;for(let n=0;n<i;n++)e[n]^=t[3&n]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=function(e){const t=Buffer.from(e.buffer);if(e.byteLength!==e.buffer.byteLength)return t.slice(e.byteOffset,e.byteOffset+e.byteLength);return t}(e):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=i(32),n=t.BufferUtil||t;e.exports={concat:s,mask(e,t,i,s,o){o<48?r(e,t,i,s,o):n.mask(e,t,i,s,o)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?o(e,t):n.unmask(e,t)}}}catch(t){e.exports={concat:s,mask:r,toArrayBuffer:a,toBuffer:c,unmask:o}}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("vscode")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(22);var s,r;!function(e){e[e.Add=0]="Add",e[e.Delete=1]="Delete"}(s=t.DiffRangeType||(t.DiffRangeType={})),function(e){e[e.Line=0]="Line",e[e.Word=1]="Word"}(r=t.DiffHighlightType||(t.DiffHighlightType={}));class o{constructor(e,t){this.row=e,this.column=t}static fromArray(e){return new o(e[0],e[1])}}t.DiffPoint=o;class a{constructor(e,t,i,n){this.diffRangeType=e,this.diffHighlightType=t,this.start=i,this.stop=n}static fromDiff(e,t,i,n){const s=c(t,i),h=c(t,i+n);s[0]==h[0]&&(s[1]++,h[1]++);let l=s[0]==h[0]?r.Word:r.Line;return i+n!=t.length-1&&"\n"!=t[i]||(s[0]++,s[1]=0,l=r.Line,s[0]!=h[0]&&i+n!=t.length-1||(h[0]++,h[1]=0)),new a(e,l,o.fromArray(s),o.fromArray(h))}}function c(e,t){let i=0,n=0;for(let s=0;s<t;s++)n++,"\n"==e[s]&&(i++,n=0);return[i,n]}t.DiffRange=a,t.cursorToRowAndColumn=c,t.diff=function(e,t){const i=new n;let r=i.diff_main(e,t);i.diff_cleanupSemantic(r);let o=[],c=-1,h=-1;for(const i of r)0==i[0]?(c+=i[1].length,h+=i[1].length):1==i[0]?(o.push(a.fromDiff(s.Add,t,h,i[1].length)),h+=i[1].length):-1==i[0]&&(o.push(a.fromDiff(s.Delete,e,c,i[1].length)),c+=i[1].length);return o}},function(e,t,i){"use strict";const n=i(9),s=i(27),r=i(10),o=i(28),a=i(29),{randomBytes:c,createHash:h}=i(0),{URL:l}=i(30),f=i(3),d=i(13),u=i(16),{BINARY_TYPES:p,EMPTY_BUFFER:_,GUID:g,kStatusCode:m,kWebSocket:v,NOOP:y}=i(1),{addEventListener:b,removeEventListener:w}=i(37),{format:x,parse:E}=i(17),{toBuffer:S}=i(4),k=["CONNECTING","OPEN","CLOSING","CLOSED"],C=[8,13],T=3e4;class D extends n{constructor(e,t,i){super(),this.readyState=D.CONNECTING,this.protocol="",this._binaryType=p[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(i=t,t=void 0),function e(t,i,n,o){const a={protocolVersion:C[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0};if(!C.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} `+`(supported versions: ${C.join(", ")})`);let d;i instanceof l?(d=i,t.url=i.href):(d=new l(i),t.url=i);const u="ws+unix:"===d.protocol;if(!(d.host||u&&d.pathname))throw new Error(`Invalid URL: ${t.url}`);const p="wss:"===d.protocol||"https:"===d.protocol;const _=p?443:80;const m=c(16).toString("base64");const v=p?s.get:r.get;let y;a.createConnection=p?O:M;a.defaultPort=a.defaultPort||_;a.port=d.port||_;a.host=d.hostname.startsWith("[")?d.hostname.slice(1,-1):d.hostname;a.headers={"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...a.headers};a.path=d.pathname+d.search;a.timeout=a.handshakeTimeout;a.perMessageDeflate&&(y=new f(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=x({[f.extensionName]:y.offer()}));n&&(a.headers["Sec-WebSocket-Protocol"]=n);a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin);(d.username||d.password)&&(a.auth=`${d.username}:${d.password}`);if(u){const e=a.path.split(":");a.socketPath=e[0],a.path=e[1]}let b=t._req=v(a);a.timeout&&b.on("timeout",()=>{N(t,b,"Opening handshake has timed out")});b.on("error",e=>{t._req.aborted||(b=t._req=null,t.readyState=D.CLOSING,t.emit("error",e),t.emitClose())});b.on("response",s=>{const r=s.headers.location,c=s.statusCode;if(r&&a.followRedirects&&c>=300&&c<400){if(++t._redirects>a.maxRedirects)return void N(t,b,"Maximum redirects exceeded");b.abort();const s=new l(r,i);e(t,s,n,o)}else t.emit("unexpected-response",b,s)||N(t,b,`Unexpected server response: ${s.statusCode}`)});b.on("upgrade",(e,i,s)=>{if(t.emit("upgrade",e),t.readyState!==D.CONNECTING)return;b=t._req=null;const r=h("sha1").update(m+g).digest("base64");if(e.headers["sec-websocket-accept"]!==r)return void N(t,i,"Invalid Sec-WebSocket-Accept header");const o=e.headers["sec-websocket-protocol"],c=(n||"").split(/, */);let l;if(!n&&o?l="Server sent a subprotocol but none was requested":n&&!o?l="Server sent no subprotocol":o&&!c.includes(o)&&(l="Server sent an invalid subprotocol"),l)N(t,i,l);else{if(o&&(t.protocol=o),y)try{const n=E(e.headers["sec-websocket-extensions"]);n[f.extensionName]&&(y.accept(n[f.extensionName]),t._extensions[f.extensionName]=y)}catch(e){return void N(t,i,"Invalid Sec-WebSocket-Extensions header")}t.setSocket(i,s,a.maxPayload)}})}(this,e,t,i)):this._isServer=!0}get CONNECTING(){return D.CONNECTING}get CLOSING(){return D.CLOSING}get CLOSED(){return D.CLOSED}get OPEN(){return D.OPEN}get binaryType(){return this._binaryType}set binaryType(e){p.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,i){const n=new d(this._binaryType,this._extensions,this._isServer,i);this._sender=new u(e,this._extensions),this._receiver=n,this._socket=e,n[v]=this,e[v]=this,n.on("conclude",P),n.on("drain",L),n.on("error",R),n.on("message",I),n.on("ping",U),n.on("pong",j),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",F),e.on("data",G),e.on("end",W),e.on("error",$),this.readyState=D.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this.readyState=D.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this.readyState=D.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==D.CLOSED){if(this.readyState===D.CONNECTING){const e="WebSocket was closed before the connection was established";return N(this,this._req,e)}this.readyState!==D.CLOSING?(this.readyState=D.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),T)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,i){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(i=e,e=t=void 0):"function"==typeof t&&(i=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===D.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||_,t,i)):A(this,e,i)}pong(e,t,i){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(i=e,e=t=void 0):"function"==typeof t&&(i=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===D.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||_,t,i)):A(this,e,i)}send(e,t,i){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(i=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==D.OPEN)return void A(this,e,i);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(n.compress=!1),this._sender.send(e||_,n,i)}terminate(){if(this.readyState!==D.CLOSED){if(this.readyState===D.CONNECTING){const e="WebSocket was closed before the connection was established";return N(this,this._req,e)}this._socket&&(this.readyState=D.CLOSING,this._socket.destroy())}}}function M(e){return e.path=e.socketPath,o.connect(e)}function O(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=e.host),a.connect(e)}function N(e,t,i){e.readyState=D.CLOSING;const n=new Error(i);Error.captureStackTrace(n,N),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function A(e,t,i){if(t){const i=S(t).length;e._socket?e._sender._bufferedBytes+=i:e._bufferedAmount+=i}if(i){i(new Error(`WebSocket is not open: readyState ${e.readyState} `+`(${k[e.readyState]})`))}}function P(e,t){const i=this[v];i._socket.removeListener("data",G),i._socket.resume(),i._closeFrameReceived=!0,i._closeMessage=t,i._closeCode=e,1005===e?i.close():i.close(e,t)}function L(){this[v]._socket.resume()}function R(e){const t=this[v];t._socket.removeListener("data",G),t.readyState=D.CLOSING,t._closeCode=e[m],t.emit("error",e),t._socket.destroy()}function B(){this[v].emitClose()}function I(e){this[v].emit("message",e)}function U(e){const t=this[v];t.pong(e,!t._isServer,y),t.emit("ping",e)}function j(e){this[v].emit("pong",e)}function F(){const e=this[v];this.removeListener("close",F),this.removeListener("end",W),e.readyState=D.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",G),this[v]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",B),e._receiver.on("finish",B))}function G(e){this[v]._receiver.write(e)||this.pause()}function W(){const e=this[v];e.readyState=D.CLOSING,e._receiver.end(),this.end()}function $(){const e=this[v];this.removeListener("error",$),this.on("error",y),e&&(e.readyState=D.CLOSING,this.destroy())}k.forEach((e,t)=>{D[e]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(D.prototype,`on${e}`,{get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const i=this.listeners(e);for(let t=0;t<i.length;t++)i[t]._listener&&this.removeListener(e,i[t]);this.addEventListener(e,t)}})}),D.prototype.addEventListener=b,D.prototype.removeEventListener=w,e.exports=D},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("http")},function(e,t,i){var n=i(2),s=i(5),r=i(12),o=require,a=process.versions.modules,c=!(!process.versions||!process.versions.electron)||!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",h=r.arch(),l=r.platform();function f(e){return o(f.path(e))}function d(e,t){try{var i=n.readdirSync(e).filter(t);return i[0]&&s.join(e,i[0])}catch(e){return null}}function u(e){return e===c+"-napi.node"}function p(e){return"node-napi.node"===e}function _(e){var t=e.split("-");return t[0]===c&&t[1]===a+".node"}function g(e){return/\.node$/.test(e)}e.exports=f,f.path=function(e){e=s.resolve(e||".");try{var t=o(s.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}var i=d(s.join(e,"build/Release"),g);if(i)return i;var n=d(s.join(e,"build/Debug"),g);if(n)return n;var r=d(s.join(e,"prebuilds/"+l+"-"+h),_);if(r)return r;var f=d(s.join(e,"prebuilds/"+l+"-"+h),u);if(f)return f;var m=d(s.join(e,"prebuilds/"+l+"-"+h),p);if(m)return m;throw new Error("No native build was found for runtime="+c+" abi="+a+" platform="+l+" arch="+h)}},function(e,t){e.exports=require("os")},function(e,t,i){"use strict";const{Writable:n}=i(14),s=i(3),{BINARY_TYPES:r,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=i(1),{concat:h,toArrayBuffer:l,unmask:f}=i(4),{isValidStatusCode:d,isValidUTF8:u}=i(15),p=0,_=1,g=2,m=3,v=4,y=5;function b(e,t,i,n){const s=new e(i?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,b),s[a]=n,s}e.exports=class extends n{constructor(e,t,i,n){super(),this._binaryType=e||r[0],this[c]=void 0,this._extensions=t||{},this._isServer=!!i,this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=p,this._loop=!1}_write(e,t,i){if(8===this._opcode&&this._state==p)return i();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(i)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const i=this._buffers[0],n=t.length-e;e>=i.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(i.buffer,i.byteOffset,e),n),this._buffers[0]=i.slice(e)),e-=i.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case p:t=this.getInfo();break;case _:t=this.getPayloadLength16();break;case g:t=this.getPayloadLength64();break;case m:this.getMask();break;case v:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,b(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[s.extensionName])return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,b(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,b(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,b(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,b(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,b(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,b(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,b(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=_;else{if(127!==this._payloadLength)return this.haveLength();this._state=g}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,b(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,b(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=m:this._state=v}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=v)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&f(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=y,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[s.extensionName].decompress(e,this._fin,(e,i)=>{if(e)return t(e);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(b(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(i)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)})}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let i;i="nodebuffer"===this._binaryType?h(t,e):"arraybuffer"===this._binaryType?l(h(t,e)):t,this.emit("message",i)}else{const i=h(t,e);if(!u(i))return this._loop=!1,b(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",i.toString())}}this._state=p}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return b(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!d(t))return b(RangeError,`invalid status code ${t}`,!0,1002);const i=e.slice(2);if(!u(i))return b(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,i.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=p}}},function(e,t){e.exports=require("stream")},function(e,t,i){"use strict";try{const e=i(35);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},function(e,t,i){"use strict";const{randomFillSync:n}=i(0),s=i(3),{EMPTY_BUFFER:r}=i(1),{isValidStatusCode:o}=i(15),{mask:a,toBuffer:c}=i(4),h=Buffer.alloc(4);class l{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const i=t.mask&&t.readOnly;let s=t.mask?6:2,r=e.length;e.length>=65536?(s+=8,r=127):e.length>125&&(s+=2,r=126);const o=Buffer.allocUnsafe(i?e.length+s:s);return o[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(o[0]|=64),o[1]=r,126===r?o.writeUInt16BE(e.length,2):127===r&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(n(h,0,4),o[1]|=128,o[s-4]=h[0],o[s-3]=h[1],o[s-2]=h[2],o[s-1]=h[3],i?(a(e,h,o,s,e.length),[o]):(a(e,h,e,0,e.length),[o,e])):[o,e]}close(e,t,i,n){let s;if(void 0===e)s=r;else{if("number"!=typeof e||!o(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)(s=Buffer.allocUnsafe(2)).writeUInt16BE(e,0);else{const i=Buffer.byteLength(t);if(i>123)throw new RangeError("The message must not be greater than 123 bytes");(s=Buffer.allocUnsafe(2+i)).writeUInt16BE(e,0),s.write(t,2)}}this._deflating?this.enqueue([this.doClose,s,i,n]):this.doClose(s,i,n)}doClose(e,t,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),i)}ping(e,t,i){const n=c(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,t,c.readOnly,i]):this.doPing(n,t,c.readOnly,i)}doPing(e,t,i,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:i}),n)}pong(e,t,i){const n=c(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,t,c.readOnly,i]):this.doPong(n,t,c.readOnly,i)}doPong(e,t,i,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:i}),n)}send(e,t,i){const n=c(e),r=this._extensions[s.extensionName];let o=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&r&&(a=n.length>=r._threshold),this._compress=a):(a=!1,o=0),t.fin&&(this._firstFragment=!0),r){const e={fin:t.fin,rsv1:a,opcode:o,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,n,this._compress,e,i]):this.dispatch(n,this._compress,e,i)}else this.sendFrame(l.frame(n,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:c.readOnly}),i)}dispatch(e,t,i,n){if(!t)return void this.sendFrame(l.frame(e,i),n);const r=this._extensions[s.extensionName];this._deflating=!0,r.compress(e,i.fin,(e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof n&&n(e);for(let t=0;t<this._queue.length;t++){const i=this._queue[t][4];"function"==typeof i&&i(e)}}else this._deflating=!1,i.readOnly=!1,this.sendFrame(l.frame(t,i),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=l},function(e,t,i){"use strict";const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function s(e,t,i){void 0===e[t]?e[t]=[i]:e[t].push(i)}e.exports={format:function(e){return Object.keys(e).map(t=>{let i=e[t];return Array.isArray(i)||(i=[i]),i.map(e=>[t].concat(Object.keys(e).map(t=>{let i=e[t];return Array.isArray(i)||(i=[i]),i.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);if(void 0===e||""===e)return t;let i,r,o=Object.create(null),a=!1,c=!1,h=!1,l=-1,f=-1,d=0;for(;d<e.length;d++){const u=e.charCodeAt(d);if(void 0===i)if(-1===f&&1===n[u])-1===l&&(l=d);else if(32===u||9===u)-1===f&&-1!==l&&(f=d);else{if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d);const n=e.slice(l,f);44===u?(s(t,n,o),o=Object.create(null)):i=n,l=f=-1}}else if(void 0===r)if(-1===f&&1===n[u])-1===l&&(l=d);else if(32===u||9===u)-1===f&&-1!==l&&(f=d);else if(59===u||44===u){if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d),s(o,e.slice(l,f),!0),44===u&&(s(t,i,o),o=Object.create(null),i=void 0),l=f=-1}else{if(61!==u||-1===l||-1!==f)throw new SyntaxError(`Unexpected character at index ${d}`);r=e.slice(l,d),l=f=-1}else if(c){if(1!==n[u])throw new SyntaxError(`Unexpected character at index ${d}`);-1===l?l=d:a||(a=!0),c=!1}else if(h)if(1===n[u])-1===l&&(l=d);else if(34===u&&-1!==l)h=!1,f=d;else{if(92!==u)throw new SyntaxError(`Unexpected character at index ${d}`);c=!0}else if(34===u&&61===e.charCodeAt(d-1))h=!0;else if(-1===f&&1===n[u])-1===l&&(l=d);else if(-1===l||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d);let n=e.slice(l,f);a&&(n=n.replace(/\\/g,""),a=!1),s(o,r,n),44===u&&(s(t,i,o),o=Object.create(null),i=void 0),r=void 0,l=f=-1}}else-1===f&&(f=d)}if(-1===l||h)throw new SyntaxError("Unexpected end of input");-1===f&&(f=d);const u=e.slice(l,f);return void 0===i?s(t,u,o):(void 0===r?s(o,u,!0):s(o,r,a?u.replace(/\\/g,""):u),s(t,i,o)),t}}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(i(19));let r=null;t.activate=function(e){(r=new s.default).start()},t.deactivate=function(){r&&r.destroy()}},function(e,t,i){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(i(6)),o=s(i(20)),a=s(i(24));t.default=class extends a.default{installHtml(){return'\n<!doctype html>\n<html>\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="Content-Security-Policy" content="style-src \'nonce-07c49590f6\'">\n    <title>Serenade</title>\n    <style nonce="07c49590f6">\n\na {\n  background: #e7b143;\n  border: none;\n  border-radius: .25rem;\n  color: rgba(0, 0, 0, 0.6);\n  display: inline-block;\n  font-weight: 600;\n  font-size: 1.1rem;\n  margin-top: 0.5rem;\n  padding: .8rem 1.6rem;\n  text-decoration: none;\n  text-shadow: 2px 2px 3px rgba(255, 255, 255, 0.1);\n  transition: background .2s ease-in-out;\n  white-space: normal;\n}\n\na:hover {\n  color: rgba(0, 0, 0, 0.6);\n  background: #edc470;\n}\n\nh1 {\n  font-size: 1.5rem;\n}\n\np {\n  font-size: 1rem;\n  line-height: 1.3;\n}\n\n    </style>\n  </head>\n  <body>\n    <h1>Welcome to Serenade!</h1>\n    <p>With Serenade, you can write code faster&mdash;by speaking in plain English, rather than typing. Use Serenade as your coding assistant, or abandon your keyboard entirely.</p>\n    <p>To get started, download the Serenade app and run it alongside VS Code.</p>\n    <a class="download" href="#">Download</a>\n  </body>\n  <script>\n\nconst vscode = acquireVsCodeApi();\ndocument.querySelector(\'.download\').addEventListener(\'click\', e => {\n  e.preventDefault();\n  vscode.postMessage({\n    type: \'download\'\n  });\n});\n\n  <\/script>\n</html>\n    '}app(){return"vscode"}createCommandHandler(){return new o.default(this.settings)}hideMessage(){}showInstallMessage(){const e=r.window.createWebviewPanel("serenade-install","Serenade",r.ViewColumn.Two,{enableScripts:!0});e.webview.html=this.installHtml(),e.webview.onDidReceiveMessage(t=>{"download"==t.type&&(r.env.openExternal(r.Uri.parse("https://serenade.ai/request")),e.dispose())})}start(){this.initialized||(this.run(),this.commandHandler.pollActiveEditor(),this.settings.setPluginInstalled("vscode"),r.window.onDidChangeActiveTextEditor(()=>{this.ipc.sendActive()}),r.window.onDidChangeWindowState(e=>{e.focused&&this.ipc.sendActive()}))}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(6)),a=r(i(21)),c=s(i(7)),h=i(23);t.default=class extends a.default{constructor(){super(...arguments),this.errorColor="255, 99, 71",this.openFileList=[],this.successColor="43, 161, 67",this.languageToExtension={c:["c","h"],cpp:["cpp","cc","cxx","c++","hpp","hh","hxx","h++"],csharp:["cs"],css:["css","scss"],dart:["dart"],go:["go"],html:["html","vue","svelte"],java:["java"],javascript:["js","jsx"],javascriptreact:["jsx","js"],jsx:["jsx","js"],kotlin:["kt"],python:["py"],ruby:["rb"],rust:["rs"],scss:["scss"],shellscript:["sh","bash"],typescript:["ts","tsx"],typescriptreact:["tsx","ts"],vue:["vue","html"]}}focus(){return n(this,void 0,void 0,function*(){this.updateActiveEditor(),this.activeEditor&&(yield o.window.showTextDocument(this.activeEditor.document),yield this.uiDelay())})}getActiveEditorText(){if(this.activeEditor)return this.activeEditor.document.getText()}highlightRanges(e){const t=[1,2,1],i=300/t.length;if(!o.window.activeTextEditor||0==e.length)return 0;for(const n of e){const e=t.map(e=>o.window.createTextEditorDecorationType({backgroundColor:`rgba(${n.diffRangeType==c.DiffRangeType.Delete?this.errorColor:this.successColor}, 0.${e})`,isWholeLine:n.diffHighlightType==c.DiffHighlightType.Line}));n.diffHighlightType==c.DiffHighlightType.Line&&n.stop.row--;for(let s=0;s<t.length;s++)setTimeout(()=>{this.activeEditor.setDecorations(e[s],[new o.Range(n.start.row,n.start.column,n.stop.row,n.stop.column)]),setTimeout(()=>{e[s].dispose()},i)},s*i)}return 400}pollActiveEditor(){setInterval(()=>{this.updateActiveEditor()},1e3)}scrollToCursor(){return n(this,void 0,void 0,function*(){if(!this.activeEditor)return;const e=this.activeEditor.selection.start.line;if(this.activeEditor.visibleRanges.length>0){const t=this.activeEditor.visibleRanges[0],i=5;(e<t.start.line+i||e>t.end.line-i)&&(yield o.commands.executeCommand("revealLine",{lineNumber:e,at:"center"}))}})}select(e,t,i,n){this.activeEditor&&(this.activeEditor.selections=[new o.Selection(e,t,i,n)])}setSourceAndCursor(e,t,i,n){this.activeEditor&&(e!=t&&this.activeEditor.edit(e=>{const i=this.activeEditor.document.lineAt(0),n=this.activeEditor.document.lineAt(this.activeEditor.document.lineCount-1),s=new o.Range(0,i.range.start.character,this.activeEditor.document.lineCount-1,n.range.end.character);e.replace(s,t)}),this.activeEditor.selections=[new o.Selection(i,n,i,n)])}updateActiveEditor(){const e=o.window.activeTextEditor;e&&(this.activeEditor=e)}COMMAND_TYPE_CLOSE_TAB(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.closeActiveEditor"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_CLOSE_WINDOW(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.closeActiveEditor"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_COPY(e){return n(this,void 0,void 0,function*(){e&&e.text&&o.env.clipboard.writeText(e.text),yield this.uiDelay()})}COMMAND_TYPE_CREATE_TAB(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.files.newUntitledFile"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_GET_EDITOR_STATE(e){return n(this,void 0,void 0,function*(){let t={message:"editorState",data:{source:"",cursor:0,filename:"",files:this.openFileList.map(e=>e.path),roots:o.workspace.workspaceFolders?o.workspace.workspaceFolders.map(e=>e.uri.path):[]}};if(!this.activeEditor)return t;if(t.data.filename=this.filenameFromLanguage(this.activeEditor.document.fileName,this.activeEditor.document.languageId,this.languageToExtension),e.limited)return t;const i=this.activeEditor.selection.active,n=i.line,s=i.character,r=this.activeEditor.document.getText();let a=0,c=0,h=0;for(let e=0;e<r.length;e++){if(c===n){if(h===s)break;h++}"\n"===r[e]&&c++,a++}return t.data.source=r,t.data.cursor=a,t})}COMMAND_TYPE_DEBUGGER_CONTINUE(e){return n(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.continue")})}COMMAND_TYPE_DEBUGGER_INLINE_BREAKPOINT(e){return n(this,void 0,void 0,function*(){yield o.commands.executeCommand("editor.debug.action.toggleInlineBreakpoint")})}COMMAND_TYPE_DEBUGGER_PAUSE(e){return n(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.pause")})}COMMAND_TYPE_DEBUGGER_SHOW_HOVER(e){return n(this,void 0,void 0,function*(){yield this.focus(),o.commands.executeCommand("editor.debug.action.showDebugHover")})}COMMAND_TYPE_DEBUGGER_START(e){return n(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.start")})}COMMAND_TYPE_DEBUGGER_STEP_INTO(e){return n(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.stepInto")})}COMMAND_TYPE_DEBUGGER_STEP_OUT(e){return n(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.stepOut")})}COMMAND_TYPE_DEBUGGER_STEP_OVER(e){return n(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.stepOver")})}COMMAND_TYPE_DEBUGGER_STOP(e){return n(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.stop")})}COMMAND_TYPE_DEBUGGER_TOGGLE_BREAKPOINT(e){return n(this,void 0,void 0,function*(){o.commands.executeCommand("editor.debug.action.toggleBreakpoint")})}COMMAND_TYPE_GO_TO_DEFINITION(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("editor.action.revealDefinition")})}COMMAND_TYPE_NEXT_TAB(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.nextEditor"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_OPEN_FILE(e){return n(this,void 0,void 0,function*(){yield o.window.showTextDocument(this.openFileList[e.index||0])})}COMMAND_TYPE_OPEN_FILE_LIST(e){return n(this,void 0,void 0,function*(){yield this.focus();const t=e.path.split("").map(e=>" "==e?"*":`{${e.toUpperCase()},${e.toLowerCase()}}`).join("");let i=["**/.git","**/.hg","**/node_modules","**/npm_packages","**/npm",...Object.keys((yield o.workspace.getConfiguration("search",null).get("exclude"))||{}),...Object.keys((yield o.workspace.getConfiguration("files",null).get("exclude"))||{})];const n=yield o.workspace.findFiles(".gitignore");return n.length>0&&(i=i.concat(h._map(h._prepare(Buffer.from(yield o.workspace.fs.readFile(n[0])).toString("utf-8").split("\n"))))),this.openFileList=yield o.workspace.findFiles(`**/*${t}*`,`{${i.map(e=>e.replace(/\\/g,"/")).join(",")}}`,10),{message:"sendText",data:{text:"callback open"}}})}COMMAND_TYPE_PREVIOUS_TAB(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.previousEditor"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_REDO(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("redo"),yield this.scrollToCursor()})}COMMAND_TYPE_SAVE(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.files.save")})}COMMAND_TYPE_SPLIT(e){return n(this,void 0,void 0,function*(){yield this.focus();const t=e.direction.toLowerCase(),i=t.charAt(0).toUpperCase()+t.slice(1);yield o.commands.executeCommand(`workbench.action.splitEditor${i}`),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_STYLE(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("editor.action.formatDocument"),yield this.uiDelay()})}COMMAND_TYPE_SWITCH_TAB(e){return n(this,void 0,void 0,function*(){yield this.focus(),e.index<0?yield o.commands.executeCommand("workbench.action.lastEditorInGroup"):yield o.commands.executeCommand(`workbench.action.openEditorAtIndex${e.index}`),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_UNDO(e){return n(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("undo"),yield this.scrollToCursor()})}COMMAND_TYPE_WINDOW(e){return n(this,void 0,void 0,function*(){yield this.focus();const t=e.direction.toLowerCase(),i=t.charAt(0).toUpperCase()+t.slice(1);yield o.commands.executeCommand(`workspace.action.focus${i}Group`),yield this.uiDelay(),this.updateActiveEditor()})}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(i(7));t.default=class{constructor(e){this.settings=e}COMMAND_TYPE_DEBUGGER_CONTINUE(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_INLINE_BREAKPOINT(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_PAUSE(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_SHOW_HOVER(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_START(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_STEP_INTO(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_STEP_OUT(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_STEP_OVER(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_STOP(e){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_TOGGLE_BREAKPOINT(e){return n(this,void 0,void 0,function*(){})}filenameFromLanguage(e,t,i){if(i[t]){let n=!1;for(const s of i[t])if(e.endsWith(`.${s}`)){n=!0;break}n||(e+=`.${i[t][0]}`)}return e}uiDelay(e=100){return n(this,void 0,void 0,function*(){return new Promise(t=>{setTimeout(()=>{t()},e)})})}updateEditor(e,t){return n(this,void 0,void 0,function*(){yield this.focus();const i=this.getActiveEditorText()||"";e=e||"";let[s,o]=r.cursorToRowAndColumn(e,t);if(!this.settings.getAnimations())return this.setSourceAndCursor(i,e,s,o),yield this.scrollToCursor(),Promise.resolve();let a=r.diff(i,e);0==a.length&&(a=[new r.DiffRange(r.DiffRangeType.Add,r.DiffHighlightType.Line,new r.DiffPoint(s,0),new r.DiffPoint(s+1,0))]);const c=a.filter(e=>e.diffRangeType==r.DiffRangeType.Add),h=a.filter(e=>e.diffRangeType==r.DiffRangeType.Delete),l=this.highlightRanges(h);return new Promise(t=>{setTimeout(()=>n(this,void 0,void 0,function*(){this.setSourceAndCursor(i,e,s,o),this.highlightRanges(c),yield this.scrollToCursor(),t()}),h.length>0?l:1)})})}COMMAND_TYPE_DIFF(e){return n(this,void 0,void 0,function*(){yield this.updateEditor(e.source,e.cursor)})}COMMAND_TYPE_SELECT(e){return n(this,void 0,void 0,function*(){const[t,i]=r.cursorToRowAndColumn(e.source,e.cursor),[n,s]=r.cursorToRowAndColumn(e.source,e.cursorEnd);this.select(t,i,n,s)})}}},function(e,t){var i=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};i.Diff=function(e,t){this[0]=e,this[1]=t},i.Diff.prototype.length=2,i.Diff.prototype.toString=function(){return this[0]+","+this[1]},i.prototype.diff_main=function(e,t,n,s){if(void 0===s&&(s=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==e||null==t)throw Error("Null input. (diff_main)");if(e==t)return e?[new i.Diff(0,e)]:[];void 0===n&&(n=!0);var r=n,o=this.diff_commonPrefix(e,t);n=e.substring(0,o),e=e.substring(o),t=t.substring(o),o=this.diff_commonSuffix(e,t);var a=e.substring(e.length-o);return e=e.substring(0,e.length-o),t=t.substring(0,t.length-o),e=this.diff_compute_(e,t,r,s),n&&e.unshift(new i.Diff(0,n)),a&&e.push(new i.Diff(0,a)),this.diff_cleanupMerge(e),e},i.prototype.diff_compute_=function(e,t,n,s){if(!e)return[new i.Diff(1,t)];if(!t)return[new i.Diff(-1,e)];var r=e.length>t.length?e:t,o=e.length>t.length?t:e,a=r.indexOf(o);return-1!=a?(n=[new i.Diff(1,r.substring(0,a)),new i.Diff(0,o),new i.Diff(1,r.substring(a+o.length))],e.length>t.length&&(n[0][0]=n[2][0]=-1),n):1==o.length?[new i.Diff(-1,e),new i.Diff(1,t)]:(r=this.diff_halfMatch_(e,t))?(t=r[1],o=r[3],e=r[4],r=this.diff_main(r[0],r[2],n,s),n=this.diff_main(t,o,n,s),r.concat([new i.Diff(0,e)],n)):n&&100<e.length&&100<t.length?this.diff_lineMode_(e,t,s):this.diff_bisect_(e,t,s)},i.prototype.diff_lineMode_=function(e,t,n){var s=this.diff_linesToChars_(e,t);e=s.chars1,t=s.chars2,s=s.lineArray,e=this.diff_main(e,t,!1,n),this.diff_charsToLines_(e,s),this.diff_cleanupSemantic(e),e.push(new i.Diff(0,""));for(var r=s=t=0,o="",a="";t<e.length;){switch(e[t][0]){case 1:r++,a+=e[t][1];break;case-1:s++,o+=e[t][1];break;case 0:if(1<=s&&1<=r){for(e.splice(t-s-r,s+r),t=t-s-r,r=(s=this.diff_main(o,a,!1,n)).length-1;0<=r;r--)e.splice(t,0,s[r]);t+=s.length}s=r=0,a=o=""}t++}return e.pop(),e},i.prototype.diff_bisect_=function(e,t,n){for(var s=e.length,r=t.length,o=Math.ceil((s+r)/2),a=2*o,c=Array(a),h=Array(a),l=0;l<a;l++)c[l]=-1,h[l]=-1;c[o+1]=0,h[o+1]=0;for(var f=0!=(l=s-r)%2,d=0,u=0,p=0,_=0,g=0;g<o&&!((new Date).getTime()>n);g++){for(var m=-g+d;m<=g-u;m+=2){for(var v=o+m,y=m==-g||m!=g&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1,b=y-m;y<s&&b<r&&e.charAt(y)==t.charAt(b);)y++,b++;if(c[v]=y,y>s)u+=2;else if(b>r)d+=2;else if(f&&(0<=(v=o+l-m)&&v<a&&-1!=h[v])){var w=s-h[v];if(y>=w)return this.diff_bisectSplit_(e,t,y,b,n)}}for(m=-g+p;m<=g-_;m+=2){for(v=o+m,y=(w=m==-g||m!=g&&h[v-1]<h[v+1]?h[v+1]:h[v-1]+1)-m;w<s&&y<r&&e.charAt(s-w-1)==t.charAt(r-y-1);)w++,y++;if(h[v]=w,w>s)_+=2;else if(y>r)p+=2;else if(!f&&(0<=(v=o+l-m)&&v<a&&-1!=c[v]&&(b=o+(y=c[v])-v,y>=(w=s-w))))return this.diff_bisectSplit_(e,t,y,b,n)}}return[new i.Diff(-1,e),new i.Diff(1,t)]},i.prototype.diff_bisectSplit_=function(e,t,i,n,s){var r=e.substring(0,i),o=t.substring(0,n);return e=e.substring(i),t=t.substring(n),r=this.diff_main(r,o,!1,s),s=this.diff_main(e,t,!1,s),r.concat(s)},i.prototype.diff_linesToChars_=function(e,t){function i(e){for(var t="",i=0,o=-1,a=n.length;o<e.length-1;){-1==(o=e.indexOf("\n",i))&&(o=e.length-1);var c=e.substring(i,o+1);(s.hasOwnProperty?s.hasOwnProperty(c):void 0!==s[c])?t+=String.fromCharCode(s[c]):(a==r&&(c=e.substring(i),o=e.length),t+=String.fromCharCode(a),s[c]=a,n[a++]=c),i=o+1}return t}var n=[],s={};n[0]="";var r=4e4,o=i(e);return r=65535,{chars1:o,chars2:i(t),lineArray:n}},i.prototype.diff_charsToLines_=function(e,t){for(var i=0;i<e.length;i++){for(var n=e[i][1],s=[],r=0;r<n.length;r++)s[r]=t[n.charCodeAt(r)];e[i][1]=s.join("")}},i.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var i=0,n=Math.min(e.length,t.length),s=n,r=0;i<s;)e.substring(r,s)==t.substring(r,s)?r=i=s:n=s,s=Math.floor((n-i)/2+i);return s},i.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var i=0,n=Math.min(e.length,t.length),s=n,r=0;i<s;)e.substring(e.length-s,e.length-r)==t.substring(t.length-s,t.length-r)?r=i=s:n=s,s=Math.floor((n-i)/2+i);return s},i.prototype.diff_commonOverlap_=function(e,t){var i=e.length,n=t.length;if(0==i||0==n)return 0;if(i>n?e=e.substring(i-n):i<n&&(t=t.substring(0,i)),i=Math.min(i,n),e==t)return i;n=0;for(var s=1;;){var r=e.substring(i-s);if(-1==(r=t.indexOf(r)))return n;s+=r,0!=r&&e.substring(i-s)!=t.substring(0,s)||(n=s,s++)}},i.prototype.diff_halfMatch_=function(e,t){function i(e,t,i){for(var n,s,o,a,c=e.substring(i,i+Math.floor(e.length/4)),h=-1,l="";-1!=(h=t.indexOf(c,h+1));){var f=r.diff_commonPrefix(e.substring(i),t.substring(h)),d=r.diff_commonSuffix(e.substring(0,i),t.substring(0,h));l.length<d+f&&(l=t.substring(h-d,h)+t.substring(h,h+f),n=e.substring(0,i-d),s=e.substring(i+f),o=t.substring(0,h-d),a=t.substring(h+f))}return 2*l.length>=e.length?[n,s,o,a,l]:null}if(0>=this.Diff_Timeout)return null;var n=e.length>t.length?e:t,s=e.length>t.length?t:e;if(4>n.length||2*s.length<n.length)return null;var r=this,o=i(n,s,Math.ceil(n.length/4));if(n=i(n,s,Math.ceil(n.length/2)),!o&&!n)return null;if(o=n?o&&o[4].length>n[4].length?o:n:o,e.length>t.length){n=o[0],s=o[1];var a=o[2],c=o[3]}else a=o[0],c=o[1],n=o[2],s=o[3];return[n,s,a,c,o[4]]},i.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],s=0,r=null,o=0,a=0,c=0,h=0,l=0;o<e.length;)0==e[o][0]?(n[s++]=o,a=h,c=l,l=h=0,r=e[o][1]):(1==e[o][0]?h+=e[o][1].length:l+=e[o][1].length,r&&r.length<=Math.max(a,c)&&r.length<=Math.max(h,l)&&(e.splice(n[s-1],0,new i.Diff(-1,r)),e[n[s-1]+1][0]=1,s--,o=0<--s?n[s-1]:-1,l=h=c=a=0,r=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;)-1==e[o-1][0]&&1==e[o][0]&&(t=e[o-1][1],n=e[o][1],(s=this.diff_commonOverlap_(t,n))>=(r=this.diff_commonOverlap_(n,t))?(s>=t.length/2||s>=n.length/2)&&(e.splice(o,0,new i.Diff(0,n.substring(0,s))),e[o-1][1]=t.substring(0,t.length-s),e[o+1][1]=n.substring(s),o++):(r>=t.length/2||r>=n.length/2)&&(e.splice(o,0,new i.Diff(0,t.substring(0,r))),e[o-1][0]=1,e[o-1][1]=n.substring(0,n.length-r),e[o+1][0]=-1,e[o+1][1]=t.substring(r),o++),o++),o++},i.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),s=t.charAt(0),r=n.match(i.nonAlphaNumericRegex_),o=s.match(i.nonAlphaNumericRegex_),a=r&&n.match(i.whitespaceRegex_),c=o&&s.match(i.whitespaceRegex_);n=a&&n.match(i.linebreakRegex_),s=c&&s.match(i.linebreakRegex_);var h=n&&e.match(i.blanklineEndRegex_),l=s&&t.match(i.blanklineStartRegex_);return h||l?5:n||s?4:r&&!a&&c?3:a||c?2:r||o?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var s=e[n-1][1],r=e[n][1],o=e[n+1][1],a=this.diff_commonSuffix(s,r);if(a){var c=r.substring(r.length-a);s=s.substring(0,s.length-a),r=c+r.substring(0,r.length-a),o=c+o}a=s,c=r;for(var h=o,l=t(s,r)+t(r,o);r.charAt(0)===o.charAt(0);){s+=r.charAt(0),r=r.substring(1)+o.charAt(0),o=o.substring(1);var f=t(s,r)+t(r,o);f>=l&&(l=f,a=s,c=r,h=o)}e[n-1][1]!=a&&(a?e[n-1][1]=a:(e.splice(n-1,1),n--),e[n][1]=c,h?e[n+1][1]=h:(e.splice(n+1,1),n--))}n++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],s=0,r=null,o=0,a=!1,c=!1,h=!1,l=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(h||l)?(n[s++]=o,a=h,c=l,r=e[o][1]):(s=0,r=null),h=l=!1):(-1==e[o][0]?l=!0:h=!0,r&&(a&&c&&h&&l||r.length<this.Diff_EditCost/2&&3==a+c+h+l)&&(e.splice(n[s-1],0,new i.Diff(-1,r)),e[n[s-1]+1][0]=1,s--,r=null,a&&c?(h=l=!0,s=0):(o=0<--s?n[s-1]:-1,h=l=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},i.prototype.diff_cleanupMerge=function(e){e.push(new i.Diff(0,""));for(var t,n=0,s=0,r=0,o="",a="";n<e.length;)switch(e[n][0]){case 1:r++,a+=e[n][1],n++;break;case-1:s++,o+=e[n][1],n++;break;case 0:1<s+r?(0!==s&&0!==r&&(0!==(t=this.diff_commonPrefix(a,o))&&(0<n-s-r&&0==e[n-s-r-1][0]?e[n-s-r-1][1]+=a.substring(0,t):(e.splice(0,0,new i.Diff(0,a.substring(0,t))),n++),a=a.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(a,o))&&(e[n][1]=a.substring(a.length-t)+e[n][1],a=a.substring(0,a.length-t),o=o.substring(0,o.length-t))),n-=s+r,e.splice(n,s+r),o.length&&(e.splice(n,0,new i.Diff(-1,o)),n++),a.length&&(e.splice(n,0,new i.Diff(1,a)),n++),n++):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,s=r=0,a=o=""}for(""===e[e.length-1][1]&&e.pop(),s=!1,n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),s=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(e)},i.prototype.diff_xIndex=function(e,t){var i,n=0,s=0,r=0,o=0;for(i=0;i<e.length&&(1!==e[i][0]&&(n+=e[i][1].length),-1!==e[i][0]&&(s+=e[i][1].length),!(n>t));i++)r=n,o=s;return e.length!=i&&-1===e[i][0]?o:o+(t-r)},i.prototype.diff_prettyHtml=function(e){for(var t=[],i=/&/g,n=/</g,s=/>/g,r=/\n/g,o=0;o<e.length;o++){var a=e[o][0],c=e[o][1].replace(i,"&amp;").replace(n,"&lt;").replace(s,"&gt;").replace(r,"&para;<br>");switch(a){case 1:t[o]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:t[o]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[o]="<span>"+c+"</span>"}}return t.join("")},i.prototype.diff_text1=function(e){for(var t=[],i=0;i<e.length;i++)1!==e[i][0]&&(t[i]=e[i][1]);return t.join("")},i.prototype.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)-1!==e[i][0]&&(t[i]=e[i][1]);return t.join("")},i.prototype.diff_levenshtein=function(e){for(var t=0,i=0,n=0,s=0;s<e.length;s++){var r=e[s][1];switch(e[s][0]){case 1:i+=r.length;break;case-1:n+=r.length;break;case 0:t+=Math.max(i,n),n=i=0}}return t+Math.max(i,n)},i.prototype.diff_toDelta=function(e){for(var t=[],i=0;i<e.length;i++)switch(e[i][0]){case 1:t[i]="+"+encodeURI(e[i][1]);break;case-1:t[i]="-"+e[i][1].length;break;case 0:t[i]="="+e[i][1].length}return t.join("\t").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(e,t){for(var n=[],s=0,r=0,o=t.split(/\t/g),a=0;a<o.length;a++){var c=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[s++]=new i.Diff(1,decodeURI(c))}catch(e){throw Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var h=parseInt(c,10);if(isNaN(h)||0>h)throw Error("Invalid number in diff_fromDelta: "+c);c=e.substring(r,r+=h),"="==o[a].charAt(0)?n[s++]=new i.Diff(0,c):n[s++]=new i.Diff(-1,c);break;default:if(o[a])throw Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(r!=e.length)throw Error("Delta length ("+r+") does not equal source text length ("+e.length+").");return n},i.prototype.match_main=function(e,t,i){if(null==e||null==t||null==i)throw Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,e.length)),e==t?0:e.length?e.substring(i,i+t.length)==t?i:this.match_bitap_(e,t,i):-1},i.prototype.match_bitap_=function(e,t,i){function n(e,n){var s=e/t.length,o=Math.abs(i-n);return r.Match_Distance?s+o/r.Match_Distance:o?1:s}if(t.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var s=this.match_alphabet_(t),r=this,o=this.Match_Threshold,a=e.indexOf(t,i);-1!=a&&(o=Math.min(n(0,a),o),-1!=(a=e.lastIndexOf(t,i+t.length))&&(o=Math.min(n(0,a),o)));var c=1<<t.length-1;a=-1;for(var h,l,f,d=t.length+e.length,u=0;u<t.length;u++){for(h=0,l=d;h<l;)n(u,i+l)<=o?h=l:d=l,l=Math.floor((d-h)/2+h);d=l,h=Math.max(1,i-l+1);var p=Math.min(i+l,e.length)+t.length;for((l=Array(p+2))[p+1]=(1<<u)-1;p>=h;p--){var _=s[e.charAt(p-1)];if(l[p]=0===u?(l[p+1]<<1|1)&_:(l[p+1]<<1|1)&_|(f[p+1]|f[p])<<1|1|f[p+1],l[p]&c&&(_=n(u,p-1))<=o){if(o=_,!((a=p-1)>i))break;h=Math.max(1,2*i-a)}}if(n(u+1,i)>o)break;f=l}return a},i.prototype.match_alphabet_=function(e){for(var t={},i=0;i<e.length;i++)t[e.charAt(i)]=0;for(i=0;i<e.length;i++)t[e.charAt(i)]|=1<<e.length-i-1;return t},i.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var n=t.substring(e.start2,e.start2+e.length1),s=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)s+=this.Patch_Margin,n=t.substring(e.start2-s,e.start2+e.length1+s);s+=this.Patch_Margin,(n=t.substring(e.start2-s,e.start2))&&e.diffs.unshift(new i.Diff(0,n)),(s=t.substring(e.start2+e.length1,e.start2+e.length1+s))&&e.diffs.push(new i.Diff(0,s)),e.start1-=n.length,e.start2-=n.length,e.length1+=n.length+s.length,e.length2+=n.length+s.length}},i.prototype.patch_make=function(e,t,n){if("string"==typeof e&&"string"==typeof t&&void 0===n){var s=e;2<(t=this.diff_main(s,t,!0)).length&&(this.diff_cleanupSemantic(t),this.diff_cleanupEfficiency(t))}else if(e&&"object"==typeof e&&void 0===t&&void 0===n)t=e,s=this.diff_text1(t);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===n)s=e;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=typeof n)throw Error("Unknown call format to patch_make.");s=e,t=n}if(0===t.length)return[];n=[],e=new i.patch_obj;for(var r=0,o=0,a=0,c=s,h=0;h<t.length;h++){var l=t[h][0],f=t[h][1];switch(r||0===l||(e.start1=o,e.start2=a),l){case 1:e.diffs[r++]=t[h],e.length2+=f.length,s=s.substring(0,a)+f+s.substring(a);break;case-1:e.length1+=f.length,e.diffs[r++]=t[h],s=s.substring(0,a)+s.substring(a+f.length);break;case 0:f.length<=2*this.Patch_Margin&&r&&t.length!=h+1?(e.diffs[r++]=t[h],e.length1+=f.length,e.length2+=f.length):f.length>=2*this.Patch_Margin&&r&&(this.patch_addContext_(e,c),n.push(e),e=new i.patch_obj,r=0,c=s,o=a)}1!==l&&(o+=f.length),-1!==l&&(a+=f.length)}return r&&(this.patch_addContext_(e,c),n.push(e)),n},i.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n],r=new i.patch_obj;r.diffs=[];for(var o=0;o<s.diffs.length;o++)r.diffs[o]=new i.Diff(s.diffs[o][0],s.diffs[o][1]);r.start1=s.start1,r.start2=s.start2,r.length1=s.length1,r.length2=s.length2,t[n]=r}return t},i.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);t=i+t+i,this.patch_splitMax(e);for(var n=0,s=[],r=0;r<e.length;r++){var o=e[r].start2+n,a=this.diff_text1(e[r].diffs),c=-1;if(a.length>this.Match_MaxBits){var h=this.match_main(t,a.substring(0,this.Match_MaxBits),o);-1!=h&&(-1==(c=this.match_main(t,a.substring(a.length-this.Match_MaxBits),o+a.length-this.Match_MaxBits))||h>=c)&&(h=-1)}else h=this.match_main(t,a,o);if(-1==h)s[r]=!1,n-=e[r].length2-e[r].length1;else if(s[r]=!0,n=h-o,a==(o=-1==c?t.substring(h,h+a.length):t.substring(h,c+this.Match_MaxBits)))t=t.substring(0,h)+this.diff_text2(e[r].diffs)+t.substring(h+a.length);else if(o=this.diff_main(a,o,!1),a.length>this.Match_MaxBits&&this.diff_levenshtein(o)/a.length>this.Patch_DeleteThreshold)s[r]=!1;else{var l;for(this.diff_cleanupSemanticLossless(o),a=0,c=0;c<e[r].diffs.length;c++){var f=e[r].diffs[c];0!==f[0]&&(l=this.diff_xIndex(o,a)),1===f[0]?t=t.substring(0,h+l)+f[1]+t.substring(h+l):-1===f[0]&&(t=t.substring(0,h+l)+t.substring(h+this.diff_xIndex(o,a+f[1].length))),-1!==f[0]&&(a+=f[1].length)}}}return[t=t.substring(i.length,t.length-i.length),s]},i.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",s=1;s<=t;s++)n+=String.fromCharCode(s);for(s=0;s<e.length;s++)e[s].start1+=t,e[s].start2+=t;var r=(s=e[0]).diffs;if(0==r.length||0!=r[0][0])r.unshift(new i.Diff(0,n)),s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t;else if(t>r[0][1].length){var o=t-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],s.start1-=o,s.start2-=o,s.length1+=o,s.length2+=o}return 0==(r=(s=e[e.length-1]).diffs).length||0!=r[r.length-1][0]?(r.push(new i.Diff(0,n)),s.length1+=t,s.length2+=t):t>r[r.length-1][1].length&&(o=t-r[r.length-1][1].length,r[r.length-1][1]+=n.substring(0,o),s.length1+=o,s.length2+=o),n},i.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var s=e[n];e.splice(n--,1);for(var r=s.start1,o=s.start2,a="";0!==s.diffs.length;){var c=new i.patch_obj,h=!0;for(c.start1=r-a.length,c.start2=o-a.length,""!==a&&(c.length1=c.length2=a.length,c.diffs.push(new i.Diff(0,a)));0!==s.diffs.length&&c.length1<t-this.Patch_Margin;){a=s.diffs[0][0];var l=s.diffs[0][1];1===a?(c.length2+=l.length,o+=l.length,c.diffs.push(s.diffs.shift()),h=!1):-1===a&&1==c.diffs.length&&0==c.diffs[0][0]&&l.length>2*t?(c.length1+=l.length,r+=l.length,h=!1,c.diffs.push(new i.Diff(a,l)),s.diffs.shift()):(l=l.substring(0,t-c.length1-this.Patch_Margin),c.length1+=l.length,r+=l.length,0===a?(c.length2+=l.length,o+=l.length):h=!1,c.diffs.push(new i.Diff(a,l)),l==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(l.length))}a=(a=this.diff_text2(c.diffs)).substring(a.length-this.Patch_Margin),""!==(l=this.diff_text1(s.diffs).substring(0,this.Patch_Margin))&&(c.length1+=l.length,c.length2+=l.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=l:c.diffs.push(new i.Diff(0,l))),h||e.splice(++n,0,c)}}},i.prototype.patch_toText=function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i];return t.join("")},i.prototype.patch_fromText=function(e){var t=[];if(!e)return t;e=e.split("\n");for(var n=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;n<e.length;){var r=e[n].match(s);if(!r)throw Error("Invalid patch string: "+e[n]);var o=new i.patch_obj;for(t.push(o),o.start1=parseInt(r[1],10),""===r[2]?(o.start1--,o.length1=1):"0"==r[2]?o.length1=0:(o.start1--,o.length1=parseInt(r[2],10)),o.start2=parseInt(r[3],10),""===r[4]?(o.start2--,o.length2=1):"0"==r[4]?o.length2=0:(o.start2--,o.length2=parseInt(r[4],10)),n++;n<e.length;){r=e[n].charAt(0);try{var a=decodeURI(e[n].substring(1))}catch(e){throw Error("Illegal escape in patch_fromText: "+a)}if("-"==r)o.diffs.push(new i.Diff(-1,a));else if("+"==r)o.diffs.push(new i.Diff(1,a));else if(" "==r)o.diffs.push(new i.Diff(0,a));else{if("@"==r)break;if(""!==r)throw Error('Invalid patch mode "'+r+'" in: '+a)}n++}}return t},i.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},i.patch_obj.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:e="+";break;case-1:e="-";break;case 0:e=" "}t[i+1]=e+encodeURI(this.diffs[i][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=i},function(e,t,i){"use strict";var n=i(2);i(5);function s(e){return"*"==e||-1!==e.indexOf(".")}function r(e){return e.filter(function(e){return"#"!==(e=e.trim()).charAt(0)&&""!==e})}function o(e){return e=e.map(function(e){if(!s(e)){var t="*"==e.slice(-1)?"*":"/**";e="/"===e.slice(-1)?[e+t]:[e,e+t]}return e}),e=(e=Array.prototype.concat.apply([],e)).map(function(e){return s(e)||"/"===e.charAt(0)?e:"**/"+e})}function a(e){return e.map(function(e){return"!"==e.charAt(0)?e.substring(1):"!"+e})}e.exports=function(e,t){e=e||".gitignore",(t=t||{}).negate=t.negate||!1;var i=n.readFileSync(e).toString().split("\n"),s=o(i=r(i));return t.negate&&(s=a(s)),s},e.exports._map=o,e.exports._prepare=r,e.exports._negate=a,e.exports._isFile=s},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(i(25)),o=s(i(40));t.default=class{constructor(){this.initialized=!1}checkInstalled(){return!!this.settings.getInstalled()||(this.showInstallMessage(),!1)}destroy(){}run(){return n(this,void 0,void 0,function*(){this.initialized||(this.settings=new o.default,this.commandHandler=this.createCommandHandler(),this.ipc=new r.default(this.commandHandler,this.app()),this.ipc.start(),this.checkInstalled(),this.initialized=!0)})}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(42),o=s(i(26));t.default=class{constructor(e,t){this.connected=!1,this.id="",this.url="ws://localhost:17373/",this.commandHandler=e,this.app=t,this.id=r.v4()}isConnected(){return this.connected}onClose(){this.connected=!1}onMessage(e){return n(this,void 0,void 0,function*(){if("string"==typeof e){let t;try{t=JSON.parse(e)}catch(e){return}if("response"===t.message){const e=yield this.handle(t.data.response);e&&this.send("callback",{callback:t.data.callback,data:e})}}})}onOpen(){this.connected=!0,this.sendActive()}ensureConnection(){if(!this.connected)try{"undefined"!=typeof WebSocket&&WebSocket?(this.websocket=new WebSocket(this.url),this.websocket.addEventListener("open",()=>{this.onOpen()}),this.websocket.addEventListener("close",()=>{this.onClose()}),this.websocket.addEventListener("message",e=>{this.onMessage(e.data)})):(this.websocket=new o.default(this.url),this.websocket.on("open",()=>{this.onOpen()}),this.websocket.on("close",()=>{this.onClose()}),this.websocket.on("message",e=>{this.onMessage(e)}))}catch(e){}}handle(e){return n(this,void 0,void 0,function*(){let t=null,i=!1;if(e.execute)for(const n of e.execute.commandsList)n.type in this.commandHandler&&(t=yield this.commandHandler[n.type](n),i=!0);return t||{message:"completed",data:{}}})}sendActive(){this.send("active",{app:this.app,id:this.id})}send(e,t){if(!this.connected||!this.websocket||1!=this.websocket.readyState)return!1;try{return this.websocket.send(JSON.stringify({message:e,data:t})),!0}catch(e){return this.connected=!1,!1}}start(){this.ensureConnection(),setInterval(()=>{this.ensureConnection()},1e3),setInterval(()=>{this.send("heartbeat",{app:this.app,id:this.id})},6e4)}}},function(e,t,i){"use strict";const n=i(8);n.createWebSocketStream=i(38),n.Server=i(39),n.Receiver=i(13),n.Sender=i(16),e.exports=n},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("zlib")},function(e,t,i){"use strict";(function(t){try{e.exports=i(11)(t)}catch(t){e.exports=i(33)}}).call(this,"/")},function(e,t,i){"use strict";e.exports={mask:(e,t,i,n,s)=>{for(var r=0;r<s;r++)i[n+r]=e[r]^t[3&r]},unmask:(e,t)=>{const i=e.length;for(var n=0;n<i;n++)e[n]^=t[3&n]}}},function(e,t,i){"use strict";const n=Symbol("kDone"),s=Symbol("kRun");e.exports=class{constructor(e){this[n]=()=>{this.pending--,this[s]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[s]()}[s](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[n])}}}},function(e,t,i){"use strict";(function(t){try{e.exports=i(11)(t)}catch(t){e.exports=i(36)}}).call(this,"/")},function(e,t,i){"use strict";e.exports=e=>{for(var t=e.length,i=0;i<t;)if(e[i]<128)i++;else if(192==(224&e[i])){if(i+1===t||128!=(192&e[i+1])||192==(254&e[i]))return!1;i+=2}else if(224==(240&e[i])){if(i+2>=t||128!=(192&e[i+1])||128!=(192&e[i+2])||224===e[i]&&128==(224&e[i+1])||237===e[i]&&160==(224&e[i+1]))return!1;i+=3}else{if(240!=(248&e[i]))return!1;if(i+3>=t||128!=(192&e[i+1])||128!=(192&e[i+2])||128!=(192&e[i+3])||240===e[i]&&128==(240&e[i+1])||244===e[i]&&e[i+1]>143||e[i]>244)return!1;i+=4}return!0}},function(e,t,i){"use strict";class n{constructor(e,t){this.target=t,this.type=e}}class s extends n{constructor(e,t){super("message",t),this.data=e}}class r extends n{constructor(e,t,i){super("close",i),this.wasClean=i._closeFrameReceived&&i._closeFrameSent,this.reason=t,this.code=e}}class o extends n{constructor(e){super("open",e)}}class a extends n{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const c={addEventListener(e,t){function i(e){t.call(this,new s(e,this))}function n(e,i){t.call(this,new r(e,i,this))}function c(e){t.call(this,new a(e,this))}function h(){t.call(this,new o(this))}"function"==typeof t&&("message"===e?(i._listener=t,this.on(e,i)):"close"===e?(n._listener=t,this.on(e,n)):"error"===e?(c._listener=t,this.on(e,c)):"open"===e?(h._listener=t,this.on(e,h)):this.on(e,t))},removeEventListener(e,t){const i=this.listeners(e);for(let n=0;n<i.length;n++)i[n]!==t&&i[n]._listener!==t||this.removeListener(e,i[n])}};e.exports=c},function(e,t,i){"use strict";const{Duplex:n}=i(14);function s(e){e.emit("close")}function r(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let i=!0;function a(){i&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a)}):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a));const c=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t){c.push(t)||(i=!1,e._socket.pause())}),e.once("error",function(e){c.destroyed||c.destroy(e)}),e.once("close",function(){c.destroyed||c.push(null)}),c._destroy=function(t,i){if(e.readyState===e.CLOSED)return i(t),void process.nextTick(s,c);let n=!1;e.once("error",function(e){n=!0,i(e)}),e.once("close",function(){n||i(t),process.nextTick(s,c)}),e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(c._readableState.endEmitted&&c.destroy(),t()):(e._socket.once("finish",function(){t()}),e.close())):e.once("open",function(){c._final(t)})},c._read=function(){e.readyState!==e.OPEN||i||(i=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,i,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",function(){c._write(t,i,n)})},c.on("end",r),c.on("error",o),c}},function(e,t,i){"use strict";const n=i(9),{createHash:s}=i(0),{createServer:r,STATUS_CODES:o}=i(10),a=i(3),c=i(8),{format:h,parse:l}=i(17),{GUID:f}=i(1),d=/^[+/0-9A-Za-z]{22}==$/,u=Symbol("kUsedByWebSocketServer");function p(e){e.emit("close")}function _(){this.destroy()}function g(e,t,i,n){e.writable&&(i=i||o[t],n={Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(i),...n},e.write(`HTTP/1.1 ${t} ${o[t]}\r\n`+Object.keys(n).map(e=>`${e}: ${n[e]}`).join("\r\n")+"\r\n\r\n"+i)),e.removeListener("error",_),e.destroy()}e.exports=class extends n{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port)this._server=r((e,t)=>{const i=o[426];t.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),t.end(i)}),this._server.listen(e.port,e.host,e.backlog,t);else if(e.server){if(e.server[u])throw new Error("The HTTP/S server is already being used by another WebSocket server");e.server[u]=!0,this._server=e.server}this._server&&(this._removeListeners=function(e,t){for(const i of Object.keys(t))e.on(i,t[i]);return function(){for(const i of Object.keys(t))e.removeListener(i,t[i])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,i)=>{this.handleUpgrade(e,t,i,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;if(t){if(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)return void t.close(()=>this.emit("close"));delete t[u]}process.nextTick(p,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,i,n){t.on("error",_);const s=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),r=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!s||!d.test(s)||8!==r&&13!==r||!this.shouldHandle(e))return g(t,400);if(this.options.perMessageDeflate){const i=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const n=l(e.headers["sec-websocket-extensions"]);n[a.extensionName]&&(i.accept(n[a.extensionName]),o[a.extensionName]=i)}catch(e){return g(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[`${8===r?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,(r,a,c,h)=>{if(!r)return g(t,a||401,c,h);this.completeUpgrade(s,o,e,t,i,n)});if(!this.options.verifyClient(a))return g(t,401)}this.completeUpgrade(s,o,e,t,i,n)}completeUpgrade(e,t,i,n,r,o){if(!n.readable||!n.writable)return n.destroy();const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(e+f).digest("base64")}`],d=new c(null);let u=i.headers["sec-websocket-protocol"];if(u&&(u=u.trim().split(/ *, */),(u=this.options.handleProtocols?this.options.handleProtocols(u,i):u[0])&&(l.push(`Sec-WebSocket-Protocol: ${u}`),d.protocol=u)),t[a.extensionName]){const e=t[a.extensionName].params,i=h({[a.extensionName]:[e]});l.push(`Sec-WebSocket-Extensions: ${i}`),d._extensions=t}this.emit("headers",l,i),n.write(l.concat("\r\n").join("\r\n")),n.removeListener("error",_),d.setSocket(n,r,this.options.maxPayload),this.clients&&(this.clients.add(d),d.on("close",()=>this.clients.delete(d))),o(d)}}},function(e,t,i){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=n(i(2)),r=n(i(41)),o=n(i(12));t.default=class{constructor(){this.systemData={},this.systemDefaults={},this.userData={},this.userDefaults={}}createIfNotExists(e){r.sync(this.path()),s.existsSync(e)||s.closeSync(s.openSync(e,"w"))}dataForFile(e){return"user"==e?this.userData:"system"==e?this.systemData:void 0}defaultsForFile(e){return"user"==e?this.userDefaults:"system"==e?this.systemDefaults:void 0}get(e,t){this.load();let i=this.dataForFile(e);return void 0===i[t]?this.defaultsForFile(e)[t]:i[t]}load(){this.systemData={},this.userData={};try{this.systemData=JSON.parse(s.readFileSync(this.systemFile()).toString())}catch(e){this.systemData={}}try{this.userData=JSON.parse(s.readFileSync(this.userFile()).toString())}catch(e){this.userData={}}}save(){this.createIfNotExists(this.systemFile()),this.createIfNotExists(this.userFile()),s.writeFileSync(this.systemFile(),JSON.stringify(this.systemData,null,2)),s.writeFileSync(this.userFile(),JSON.stringify(this.userData,null,2))}set(e,t,i){this.load(),this.dataForFile(e)[t]=i,this.save()}systemFile(){return`${this.path()}/serenade.json`}userFile(){return`${this.path()}/settings.json`}getAnimations(){return this.get("user","animations")}getAtom(){return this.get("system","atom")}getCode(){return this.get("system","code")}getInstalled(){return this.get("system","installed")}path(){return`${o.homedir()}/.serenade`}setPluginInstalled(e){this.load();let t=this.dataForFile("system");t.plugins||(t.plugins=[]),t.plugins.includes(e)||t.plugins.push(e),this.save()}}},function(e,t,i){var n=i(5),s=i(2),r=parseInt("0777",8);function o(e,t,i,a){"function"==typeof t?(i=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,h=t.fs||s;void 0===c&&(c=r&~process.umask()),a||(a=null);var l=i||function(){};e=n.resolve(e),h.mkdir(e,c,function(i){if(!i)return l(null,a=a||e);switch(i.code){case"ENOENT":o(n.dirname(e),t,function(i,n){i?l(i,n):o(e,t,l,n)});break;default:h.stat(e,function(e,t){e||!t.isDirectory()?l(i,a):l(null,a)})}})}e.exports=o.mkdirp=o.mkdirP=o,o.sync=function e(t,i,o){i&&"object"==typeof i||(i={mode:i});var a=i.mode,c=i.fs||s;void 0===a&&(a=r&~process.umask()),o||(o=null),t=n.resolve(t);try{c.mkdirSync(t,a),o=o||t}catch(s){switch(s.code){case"ENOENT":o=e(n.dirname(t),i,o),e(t,i,o);break;default:var h;try{h=c.statSync(t)}catch(e){throw s}if(!h.isDirectory())throw s}}return o}},function(e,t,i){"use strict";i.r(t);var n=i(0),s=i.n(n);function r(){return s.a.randomBytes(16)}for(var o=[],a=0;a<256;++a)o[a]=(a+256).toString(16).substr(1);var c,h,l=function(e,t){var i=t||0,n=o;return[n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]]].join("")},f=0,d=0;var u=function(e,t,i){var n=t&&i||0,s=t||[],o=(e=e||{}).node||c,a=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==a){var u=e.random||(e.rng||r)();null==o&&(o=c=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=h=16383&(u[6]<<8|u[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),_=void 0!==e.nsecs?e.nsecs:d+1,g=p-f+(_-d)/1e4;if(g<0&&void 0===e.clockseq&&(a=a+1&16383),(g<0||p>f)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=p,d=_,h=a;var m=(1e4*(268435455&(p+=122192928e5))+_)%4294967296;s[n++]=m>>>24&255,s[n++]=m>>>16&255,s[n++]=m>>>8&255,s[n++]=255&m;var v=p/4294967296*1e4&268435455;s[n++]=v>>>8&255,s[n++]=255&v,s[n++]=v>>>24&15|16,s[n++]=v>>>16&255,s[n++]=a>>>8|128,s[n++]=255&a;for(var y=0;y<6;++y)s[n+y]=o[y];return t||l(s)};var p=function(e,t,i){var n=function(e,n,s,r){var o=s&&r||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(e)),"string"==typeof n&&(n=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,function(e){t.push(parseInt(e,16))}),t}(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=i(n.concat(e));if(a[6]=15&a[6]|t,a[8]=63&a[8]|128,s)for(var c=0;c<16;++c)s[o+c]=a[c];return s||l(a)};try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};var _=p("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),s.a.createHash("md5").update(e).digest()});var g=function(e,t,i){var n=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[n+o]=s[o];return t||l(s)};var m=p("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),s.a.createHash("sha1").update(e).digest()});i.d(t,"v1",function(){return u}),i.d(t,"v3",function(){return _}),i.d(t,"v4",function(){return g}),i.d(t,"v5",function(){return m})}]);
//# sourceMappingURL=extension.js.map
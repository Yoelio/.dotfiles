module.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";const i=n(35),r=n(5),s=n(38),{kStatusCode:o,NOOP:a}=n(1),h=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),l=Symbol("total-length"),f=Symbol("callback"),u=Symbol("buffers"),d=Symbol("error");let p;function g(e){this[u].push(e),this[l]+=e.length}function _(e){this[l]+=e.length,this[c]._maxPayload<1||this[l]<=this[c]._maxPayload?this[u].push(e):(this[d]=new RangeError("Max payload size exceeded"),this[d][o]=1009,this.removeListener("data",_),this.reset())}function m(e){this[c]._inflate=null,e[o]=1007,this[f](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[f];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){p.add(i=>{this._decompress(e,t,(e,t)=>{i(),n(e,t)})})}compress(e,t,n){p.add(i=>{this._compress(e,t,(e,t)=>{i(),n(e,t)})})}_decompress(e,t,n){const s=this._isServer?"client":"server";if(!this._inflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[l]=0,this._inflate[u]=[],this._inflate.on("error",m),this._inflate.on("data",_)}this._inflate[f]=n,this._inflate.write(e),t&&this._inflate.write(h),this._inflate.flush(()=>{const e=this._inflate[d];if(e)return this._inflate.close(),this._inflate=null,void n(e);const i=r.concat(this._inflate[u],this._inflate[l]);t&&this.params[`${s}_no_context_takeover`]?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[u]=[]),n(null,i)})}_compress(e,t,n){const s=this._isServer?"server":"client";if(!this._deflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[u]=[],this._deflate.on("error",a),this._deflate.on("data",g)}this._deflate[f]=n,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=r.concat(this._deflate[u],this._deflate[l]);t&&(e=e.slice(0,e.length-4)),this._deflate[f]=null,t&&this.params[`${s}_no_context_takeover`]?(this._deflate.close(),this._deflate=null):(this._deflate[l]=0,this._deflate[u]=[]),n(null,e)})}}},function(e,t,n){"use strict";const{EMPTY_BUFFER:i}=n(1);function r(e,t){if(0===e.length)return i;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);let r=0;for(let t=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return r<t?n.slice(0,r):n}function s(e,t,n,i,r){for(let s=0;s<r;s++)n[i+s]=e[s]^t[3&s]}function o(e,t){const n=e.length;for(let i=0;i<n;i++)e[i]^=t[3&i]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function h(e){if(h.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=function(e){const t=Buffer.from(e.buffer);if(e.byteLength!==e.buffer.byteLength)return t.slice(e.byteOffset,e.byteOffset+e.byteLength);return t}(e):(t=Buffer.from(e),h.readOnly=!1),t}try{const t=n(36),i=t.BufferUtil||t;e.exports={concat:r,mask(e,t,n,r,o){o<48?s(e,t,n,r,o):i.mask(e,t,n,r,o)},toArrayBuffer:a,toBuffer:h,unmask(e,t){e.length<32?o(e,t):i.unmask(e,t)}}}catch(t){e.exports={concat:r,mask:s,toArrayBuffer:a,toBuffer:h,unmask:o}}},function(e,t){e.exports=require("vscode")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(26);var r,s;!function(e){e[e.Add=0]="Add",e[e.Delete=1]="Delete"}(r=t.DiffRangeType||(t.DiffRangeType={})),function(e){e[e.Line=0]="Line",e[e.Word=1]="Word"}(s=t.DiffHighlightType||(t.DiffHighlightType={}));class o{constructor(e,t){this.row=e,this.column=t}static fromArray(e){return new o(e[0],e[1])}}t.DiffPoint=o;class a{constructor(e,t,n,i){this.diffRangeType=e,this.diffHighlightType=t,this.start=n,this.stop=i}static fromDiff(e,t,n,i){const r=h(t,n),c=h(t,n+i);r[0]==c[0]&&(r[1]++,c[1]++);let l=r[0]==c[0]?s.Word:s.Line;return n+i!=t.length-1&&"\n"!=t[n]||(r[0]++,r[1]=0,l=s.Line,r[0]!=c[0]&&n+i!=t.length-1||(c[0]++,c[1]=0)),new a(e,l,o.fromArray(r),o.fromArray(c))}}function h(e,t){let n=0,i=0;for(let r=0;r<t;r++)i++,"\n"==e[r]&&(n++,i=0);return[n,i]}t.DiffRange=a,t.cursorToRowAndColumn=h,t.diff=function(e,t){const n=new i;let s=n.diff_main(e,t);n.diff_cleanupSemantic(s);let o=[],h=-1,c=-1;for(const n of s)0==n[0]?(h+=n[1].length,c+=n[1].length):1==n[0]?(o.push(a.fromDiff(r.Add,t,c,n[1].length)),c+=n[1].length):-1==n[0]&&(o.push(a.fromDiff(r.Delete,e,h,n[1].length)),h+=n[1].length);return o}},function(e,t,n){"use strict";const i=n(9),r=n(31),s=n(10),o=n(32),a=n(33),{randomBytes:h,createHash:c}=n(0),{URL:l}=n(34),f=n(4),u=n(13),d=n(16),{BINARY_TYPES:p,EMPTY_BUFFER:g,GUID:_,kStatusCode:m,kWebSocket:v,NOOP:y}=n(1),{addEventListener:b,removeEventListener:w}=n(41),{format:x,parse:E}=n(17),{toBuffer:S}=n(5),k=["CONNECTING","OPEN","CLOSING","CLOSED"],C=[8,13],T=3e4;class M extends i{constructor(e,t,n){super(),this.readyState=M.CONNECTING,this.protocol="",this._binaryType=p[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),function e(t,n,i,o){const a={protocolVersion:C[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0};if(!C.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} `+`(supported versions: ${C.join(", ")})`);let u;n instanceof l?(u=n,t.url=n.href):(u=new l(n),t.url=n);const d="ws+unix:"===u.protocol;if(!(u.host||d&&u.pathname))throw new Error(`Invalid URL: ${t.url}`);const p="wss:"===u.protocol||"https:"===u.protocol;const g=p?443:80;const m=h(16).toString("base64");const v=p?r.get:s.get;let y;a.createConnection=p?D:O;a.defaultPort=a.defaultPort||g;a.port=u.port||g;a.host=u.hostname.startsWith("[")?u.hostname.slice(1,-1):u.hostname;a.headers={"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...a.headers};a.path=u.pathname+u.search;a.timeout=a.handshakeTimeout;a.perMessageDeflate&&(y=new f(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=x({[f.extensionName]:y.offer()}));i&&(a.headers["Sec-WebSocket-Protocol"]=i);a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin);(u.username||u.password)&&(a.auth=`${u.username}:${u.password}`);if(d){const e=a.path.split(":");a.socketPath=e[0],a.path=e[1]}let b=t._req=v(a);a.timeout&&b.on("timeout",()=>{A(t,b,"Opening handshake has timed out")});b.on("error",e=>{t._req.aborted||(b=t._req=null,t.readyState=M.CLOSING,t.emit("error",e),t.emitClose())});b.on("response",r=>{const s=r.headers.location,h=r.statusCode;if(s&&a.followRedirects&&h>=300&&h<400){if(++t._redirects>a.maxRedirects)return void A(t,b,"Maximum redirects exceeded");b.abort();const r=new l(s,n);e(t,r,i,o)}else t.emit("unexpected-response",b,r)||A(t,b,`Unexpected server response: ${r.statusCode}`)});b.on("upgrade",(e,n,r)=>{if(t.emit("upgrade",e),t.readyState!==M.CONNECTING)return;b=t._req=null;const s=c("sha1").update(m+_).digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void A(t,n,"Invalid Sec-WebSocket-Accept header");const o=e.headers["sec-websocket-protocol"],h=(i||"").split(/, */);let l;if(!i&&o?l="Server sent a subprotocol but none was requested":i&&!o?l="Server sent no subprotocol":o&&!h.includes(o)&&(l="Server sent an invalid subprotocol"),l)A(t,n,l);else{if(o&&(t.protocol=o),y)try{const i=E(e.headers["sec-websocket-extensions"]);i[f.extensionName]&&(y.accept(i[f.extensionName]),t._extensions[f.extensionName]=y)}catch(e){return void A(t,n,"Invalid Sec-WebSocket-Extensions header")}t.setSocket(n,r,a.maxPayload)}})}(this,e,t,n)):this._isServer=!0}get CONNECTING(){return M.CONNECTING}get CLOSING(){return M.CLOSING}get CLOSED(){return M.CLOSED}get OPEN(){return M.OPEN}get binaryType(){return this._binaryType}set binaryType(e){p.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,n){const i=new u(this._binaryType,this._extensions,this._isServer,n);this._sender=new d(e,this._extensions),this._receiver=i,this._socket=e,i[v]=this,e[v]=this,i.on("conclude",P),i.on("drain",L),i.on("error",R),i.on("message",I),i.on("ping",j),i.on("pong",U),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",F),e.on("data",G),e.on("end",$),e.on("error",W),this.readyState=M.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this.readyState=M.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this.readyState=M.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==M.CLOSED){if(this.readyState===M.CONNECTING){const e="WebSocket was closed before the connection was established";return A(this,this._req,e)}this.readyState!==M.CLOSING?(this.readyState=M.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),T)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,n){if(this.readyState===M.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===M.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,n)):N(this,e,n)}pong(e,t,n){if(this.readyState===M.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===M.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,n)):N(this,e,n)}send(e,t,n){if(this.readyState===M.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(n=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==M.OPEN)return void N(this,e,n);const i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(i.compress=!1),this._sender.send(e||g,i,n)}terminate(){if(this.readyState!==M.CLOSED){if(this.readyState===M.CONNECTING){const e="WebSocket was closed before the connection was established";return A(this,this._req,e)}this._socket&&(this.readyState=M.CLOSING,this._socket.destroy())}}}function O(e){return e.path=e.socketPath,o.connect(e)}function D(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=e.host),a.connect(e)}function A(e,t,n){e.readyState=M.CLOSING;const i=new Error(n);Error.captureStackTrace(i,A),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function N(e,t,n){if(t){const n=S(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(n){n(new Error(`WebSocket is not open: readyState ${e.readyState} `+`(${k[e.readyState]})`))}}function P(e,t){const n=this[v];n._socket.removeListener("data",G),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,1005===e?n.close():n.close(e,t)}function L(){this[v]._socket.resume()}function R(e){const t=this[v];t._socket.removeListener("data",G),t.readyState=M.CLOSING,t._closeCode=e[m],t.emit("error",e),t._socket.destroy()}function B(){this[v].emitClose()}function I(e){this[v].emit("message",e)}function j(e){const t=this[v];t.pong(e,!t._isServer,y),t.emit("ping",e)}function U(e){this[v].emit("pong",e)}function F(){const e=this[v];this.removeListener("close",F),this.removeListener("end",$),e.readyState=M.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",G),this[v]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",B),e._receiver.on("finish",B))}function G(e){this[v]._receiver.write(e)||this.pause()}function $(){const e=this[v];e.readyState=M.CLOSING,e._receiver.end(),this.end()}function W(){const e=this[v];this.removeListener("error",W),this.on("error",y),e&&(e.readyState=M.CLOSING,this.destroy())}k.forEach((e,t)=>{M[e]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(M.prototype,`on${e}`,{get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const n=this.listeners(e);for(let t=0;t<n.length;t++)n[t]._listener&&this.removeListener(e,n[t]);this.addEventListener(e,t)}})}),M.prototype.addEventListener=b,M.prototype.removeEventListener=w,e.exports=M},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("http")},function(e,t,n){var i=n(3),r=n(2),s=n(12),o=require,a=process.versions.modules,h=!(!process.versions||!process.versions.electron)||!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",c=s.arch(),l=s.platform();function f(e){return o(f.path(e))}function u(e,t){try{var n=i.readdirSync(e).filter(t);return n[0]&&r.join(e,n[0])}catch(e){return null}}function d(e){return e===h+"-napi.node"}function p(e){return"node-napi.node"===e}function g(e){var t=e.split("-");return t[0]===h&&t[1]===a+".node"}function _(e){return/\.node$/.test(e)}e.exports=f,f.path=function(e){e=r.resolve(e||".");try{var t=o(r.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}var n=u(r.join(e,"build/Release"),_);if(n)return n;var i=u(r.join(e,"build/Debug"),_);if(i)return i;var s=u(r.join(e,"prebuilds/"+l+"-"+c),g);if(s)return s;var f=u(r.join(e,"prebuilds/"+l+"-"+c),d);if(f)return f;var m=u(r.join(e,"prebuilds/"+l+"-"+c),p);if(m)return m;throw new Error("No native build was found for runtime="+h+" abi="+a+" platform="+l+" arch="+c)}},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";const{Writable:i}=n(14),r=n(4),{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:h}=n(1),{concat:c,toArrayBuffer:l,unmask:f}=n(5),{isValidStatusCode:u,isValidUTF8:d}=n(15),p=0,g=1,_=2,m=3,v=4,y=5;function b(e,t,n,i){const r=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(r,b),r[a]=i,r}e.exports=class extends i{constructor(e,t,n,i){super(),this._binaryType=e||s[0],this[h]=void 0,this._extensions=t||{},this._isServer=!!n,this._maxPayload=0|i,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=p,this._loop=!1}_write(e,t,n){if(8===this._opcode&&this._state==p)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0],i=t.length-e;e>=n.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case p:t=this.getInfo();break;case g:t=this.getPayloadLength16();break;case _:t=this.getPayloadLength64();break;case m:this.getMask();break;case v:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,b(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[r.extensionName])return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,b(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,b(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,b(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,b(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,b(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,b(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,b(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,b(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=g;else{if(127!==this._payloadLength)return this.haveLength();this._state=_}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,b(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,b(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=m:this._state=v}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=v)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&f(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=y,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[r.extensionName].decompress(e,this._fin,(e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(b(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)})}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?c(t,e):"arraybuffer"===this._binaryType?l(c(t,e)):t,this.emit("message",n)}else{const n=c(t,e);if(!d(n))return this._loop=!1,b(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",n.toString())}}this._state=p}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return b(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!u(t))return b(RangeError,`invalid status code ${t}`,!0,1002);const n=e.slice(2);if(!d(n))return b(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=p}}},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";try{const e=n(39);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},function(e,t,n){"use strict";const{randomFillSync:i}=n(0),r=n(4),{EMPTY_BUFFER:s}=n(1),{isValidStatusCode:o}=n(15),{mask:a,toBuffer:h}=n(5),c=Buffer.alloc(4);class l{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=t.mask&&t.readOnly;let r=t.mask?6:2,s=e.length;e.length>=65536?(r+=8,s=127):e.length>125&&(r+=2,s=126);const o=Buffer.allocUnsafe(n?e.length+r:r);return o[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(o[0]|=64),o[1]=s,126===s?o.writeUInt16BE(e.length,2):127===s&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(i(c,0,4),o[1]|=128,o[r-4]=c[0],o[r-3]=c[1],o[r-2]=c[2],o[r-1]=c[3],n?(a(e,c,o,r,e.length),[o]):(a(e,c,e,0,e.length),[o,e])):[o,e]}close(e,t,n,i){let r;if(void 0===e)r=s;else{if("number"!=typeof e||!o(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)(r=Buffer.allocUnsafe(2)).writeUInt16BE(e,0);else{const n=Buffer.byteLength(t);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");(r=Buffer.allocUnsafe(2+n)).writeUInt16BE(e,0),r.write(t,2)}}this._deflating?this.enqueue([this.doClose,r,n,i]):this.doClose(r,n,i)}doClose(e,t,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){const i=h(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,t,h.readOnly,n]):this.doPing(i,t,h.readOnly,n)}doPing(e,t,n,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),i)}pong(e,t,n){const i=h(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,t,h.readOnly,n]):this.doPong(i,t,h.readOnly,n)}doPong(e,t,n,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),i)}send(e,t,n){const i=h(e),s=this._extensions[r.extensionName];let o=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&s&&(a=i.length>=s._threshold),this._compress=a):(a=!1,o=0),t.fin&&(this._firstFragment=!0),s){const e={fin:t.fin,rsv1:a,opcode:o,mask:t.mask,readOnly:h.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,e,n]):this.dispatch(i,this._compress,e,n)}else this.sendFrame(l.frame(i,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:h.readOnly}),n)}dispatch(e,t,n,i){if(!t)return void this.sendFrame(l.frame(e,n),i);const s=this._extensions[r.extensionName];this._deflating=!0,s.compress(e,n.fin,(e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){const n=this._queue[t][4];"function"==typeof n&&n(e)}}else this._deflating=!1,n.readOnly=!1,this.sendFrame(l.frame(t,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=l},function(e,t,n){"use strict";const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}e.exports={format:function(e){return Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);if(void 0===e||""===e)return t;let n,s,o=Object.create(null),a=!1,h=!1,c=!1,l=-1,f=-1,u=0;for(;u<e.length;u++){const d=e.charCodeAt(u);if(void 0===n)if(-1===f&&1===i[d])-1===l&&(l=u);else if(32===d||9===d)-1===f&&-1!==l&&(f=u);else{if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${u}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${u}`);-1===f&&(f=u);const i=e.slice(l,f);44===d?(r(t,i,o),o=Object.create(null)):n=i,l=f=-1}}else if(void 0===s)if(-1===f&&1===i[d])-1===l&&(l=u);else if(32===d||9===d)-1===f&&-1!==l&&(f=u);else if(59===d||44===d){if(-1===l)throw new SyntaxError(`Unexpected character at index ${u}`);-1===f&&(f=u),r(o,e.slice(l,f),!0),44===d&&(r(t,n,o),o=Object.create(null),n=void 0),l=f=-1}else{if(61!==d||-1===l||-1!==f)throw new SyntaxError(`Unexpected character at index ${u}`);s=e.slice(l,u),l=f=-1}else if(h){if(1!==i[d])throw new SyntaxError(`Unexpected character at index ${u}`);-1===l?l=u:a||(a=!0),h=!1}else if(c)if(1===i[d])-1===l&&(l=u);else if(34===d&&-1!==l)c=!1,f=u;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${u}`);h=!0}else if(34===d&&61===e.charCodeAt(u-1))c=!0;else if(-1===f&&1===i[d])-1===l&&(l=u);else if(-1===l||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${u}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${u}`);-1===f&&(f=u);let i=e.slice(l,f);a&&(i=i.replace(/\\/g,""),a=!1),r(o,s,i),44===d&&(r(t,n,o),o=Object.create(null),n=void 0),s=void 0,l=f=-1}}else-1===f&&(f=u)}if(-1===l||c)throw new SyntaxError("Unexpected end of input");-1===f&&(f=u);const d=e.slice(l,f);return void 0===n?r(t,d,o):(void 0===s?r(o,d,!0):r(o,s,a?d.replace(/\\/g,""):d),r(t,n,o)),t}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(19));let s=null;t.activate=function(e){(s=new r.default).start()},t.deactivate=function(){s&&s.destroy()}},function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(6)),o=r(n(20)),a=r(n(28));t.default=class extends a.default{installHtml(){return'\n<!doctype html>\n<html>\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="Content-Security-Policy" content="style-src \'nonce-07c49590f6\'">\n    <title>Serenade</title>\n    <style nonce="07c49590f6">\n\na {\n  background: #e7b143;\n  border: none;\n  border-radius: .25rem;\n  color: rgba(0, 0, 0, 0.6);\n  display: inline-block;\n  font-weight: 600;\n  font-size: 1.1rem;\n  margin-top: 0.5rem;\n  padding: .8rem 1.6rem;\n  text-decoration: none;\n  text-shadow: 2px 2px 3px rgba(255, 255, 255, 0.1);\n  transition: background .2s ease-in-out;\n  white-space: normal;\n}\n\na:hover {\n  color: rgba(0, 0, 0, 0.6);\n  background: #edc470;\n}\n\nh1 {\n  font-size: 1.5rem;\n}\n\np {\n  font-size: 1rem;\n  line-height: 1.3;\n}\n\n    </style>\n  </head>\n  <body>\n    <h1>Welcome to Serenade!</h1>\n    <p>With Serenade, you can write code faster&mdash;by speaking in plain English, rather than typing. Use Serenade as your coding assistant, or abandon your keyboard entirely.</p>\n    <p>To get started, download the Serenade app and run it alongside VS Code.</p>\n    <a class="download" href="#">Download</a>\n  </body>\n  <script>\n\nconst vscode = acquireVsCodeApi();\ndocument.querySelector(\'.download\').addEventListener(\'click\', e => {\n  e.preventDefault();\n  vscode.postMessage({\n    type: \'download\'\n  });\n});\n\n  <\/script>\n</html>\n    '}app(){return"vscode"}createCommandHandler(){return new o.default(this.settings)}hideMessage(){}showInstallMessage(){const e=s.window.createWebviewPanel("serenade-install","Serenade",s.ViewColumn.Two,{enableScripts:!0});e.webview.html=this.installHtml(),e.webview.onDidReceiveMessage(t=>{"download"==t.type&&(s.env.openExternal(s.Uri.parse("https://serenade.ai/request")),e.dispose())})}start(){this.initialized||(this.run(),this.commandHandler.pollActiveEditor(),this.settings.setPluginInstalled("vscode"),s.window.onDidChangeActiveTextEditor(()=>{this.ipc.sendActive()}),s.window.onDidChangeWindowState(e=>{e.focused&&this.ipc.sendActive()}))}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{h(i.next(e))}catch(e){s(e)}}function a(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}h((i=i.apply(e,t||[])).next())})},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(6)),a=s(n(21)),h=s(n(25)),c=r(n(7)),l=n(27);t.default=class extends h.default{constructor(){super(...arguments),this.errorColor="255, 99, 71",this.openFileList=[],this.successColor="43, 161, 67"}filenameForEditor(e){const t={css:"file.css",dart:"file.dart",html:"file.html",less:"file.less",java:"file.java",javascript:"file.js",javascriptreact:"file.js",kotlin:"file.kt",python:"file.py",scss:"file.scss",typescript:"file.ts",typescriptreact:"file.tsx"};return t[e.document.languageId]?t[e.document.languageId]:e.document.fileName}focus(){return i(this,void 0,void 0,function*(){this.updateActiveEditor(),this.activeEditor&&(yield o.window.showTextDocument(this.activeEditor.document),yield this.uiDelay())})}getActiveEditorText(){if(this.activeEditor)return this.activeEditor.document.getText()}highlightRanges(e){const t=[1,2,1],n=300/t.length;if(!o.window.activeTextEditor||0==e.length)return 0;for(const i of e){const e=t.map(e=>o.window.createTextEditorDecorationType({backgroundColor:`rgba(${i.diffRangeType==c.DiffRangeType.Delete?this.errorColor:this.successColor}, 0.${e})`,isWholeLine:i.diffHighlightType==c.DiffHighlightType.Line}));i.diffHighlightType==c.DiffHighlightType.Line&&i.stop.row--;for(let r=0;r<t.length;r++)setTimeout(()=>{this.activeEditor.setDecorations(e[r],[new o.Range(i.start.row,i.start.column,i.stop.row,i.stop.column)]),setTimeout(()=>{e[r].dispose()},n)},r*n)}return 400}pollActiveEditor(){setInterval(()=>{this.updateActiveEditor()},1e3)}scrollToCursor(){return i(this,void 0,void 0,function*(){if(!this.activeEditor)return;const e=this.activeEditor.selection.start.line;if(this.activeEditor.visibleRanges.length>0){const t=this.activeEditor.visibleRanges[0],n=5;(e<t.start.line+n||e>t.end.line-n)&&(yield o.commands.executeCommand("revealLine",{lineNumber:e,at:"center"}))}})}select(e,t,n,i){this.activeEditor&&(this.activeEditor.selections=[new o.Selection(e,t,n,i)])}setSourceAndCursor(e,t,n,i){this.activeEditor&&(e!=t&&this.activeEditor.edit(e=>{const n=this.activeEditor.document.lineAt(0),i=this.activeEditor.document.lineAt(this.activeEditor.document.lineCount-1),r=new o.Range(0,n.range.start.character,this.activeEditor.document.lineCount-1,i.range.end.character);e.replace(r,t)}),this.activeEditor.selections=[new o.Selection(n,i,n,i)])}updateActiveEditor(){const e=o.window.activeTextEditor;e&&(this.activeEditor=e)}COMMAND_TYPE_CLOSE_TAB(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.closeActiveEditor"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_CLOSE_WINDOW(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.closeActiveEditor"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_COPY(e){return i(this,void 0,void 0,function*(){e&&e.text&&o.env.clipboard.writeText(e.text),yield this.uiDelay()})}COMMAND_TYPE_CREATE_TAB(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.files.newUntitledFile"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_GET_EDITOR_STATE(e){return i(this,void 0,void 0,function*(){if(!this.activeEditor)return;let e={source:"",cursor:0,filename:"",files:this.openFileList.map(e=>e.path),roots:o.workspace.workspaceFolders?o.workspace.workspaceFolders.map(e=>e.uri.path):[]};const t=this.activeEditor.selection.active,n=t.line,i=t.character,r=this.activeEditor.document.getText();let s=0,a=0,h=0;for(let e=0;e<r.length;e++){if(a===n){if(h===i)break;h++}"\n"===r[e]&&a++,s++}return e.source=r,e.cursor=s,e.filename=this.filenameForEditor(this.activeEditor),{message:"editorState",data:e}})}COMMAND_TYPE_DEBUGGER_CONTINUE(e){return i(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.continue")})}COMMAND_TYPE_DEBUGGER_INLINE_BREAKPOINT(e){return i(this,void 0,void 0,function*(){yield o.commands.executeCommand("editor.debug.action.toggleInlineBreakpoint")})}COMMAND_TYPE_DEBUGGER_PAUSE(e){return i(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.pause")})}COMMAND_TYPE_DEBUGGER_SHOW_HOVER(e){return i(this,void 0,void 0,function*(){yield this.focus(),o.commands.executeCommand("editor.debug.action.showDebugHover")})}COMMAND_TYPE_DEBUGGER_START(e){return i(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.start")})}COMMAND_TYPE_DEBUGGER_STEP_INTO(e){return i(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.stepInto")})}COMMAND_TYPE_DEBUGGER_STEP_OUT(e){return i(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.stepOut")})}COMMAND_TYPE_DEBUGGER_STEP_OVER(e){return i(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.stepOver")})}COMMAND_TYPE_DEBUGGER_STOP(e){return i(this,void 0,void 0,function*(){o.commands.executeCommand("workbench.action.debug.stop")})}COMMAND_TYPE_DEBUGGER_TOGGLE_BREAKPOINT(e){return i(this,void 0,void 0,function*(){o.commands.executeCommand("editor.debug.action.toggleBreakpoint")})}COMMAND_TYPE_GO_TO_DEFINITION(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("editor.action.revealDefinition")})}COMMAND_TYPE_NEXT_TAB(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.nextEditor"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_OPEN_FILE(e){return i(this,void 0,void 0,function*(){yield o.window.showTextDocument(this.openFileList[e.index||0])})}COMMAND_TYPE_OPEN_FILE_LIST(e){return i(this,void 0,void 0,function*(){yield this.focus();const t=e.path.split("").map(e=>" "==e?"*":`{${e.toUpperCase()},${e.toLowerCase()}}`).join("");let n=[];const i=yield o.workspace.findFiles(".gitignore");return i.length>0&&(n=l._map(l._prepare(Buffer.from(yield o.workspace.fs.readFile(i[0])).toString("utf-8").split("\n")))),this.openFileList=(yield o.workspace.findFiles(`**/*${t}*`,void 0,100)).filter(e=>n.every(t=>!a.default(e.path,t))).slice(0,10),{message:"sendText",data:{text:"callback open"}}})}COMMAND_TYPE_PASTE(e){return i(this,void 0,void 0,function*(){this.activeEditor&&o.env.clipboard.readText().then(t=>{const n=this.activeEditor.document.getText();this.pasteText(n,e,t)})})}COMMAND_TYPE_PREVIOUS_TAB(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.previousEditor"),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_REDO(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("redo"),yield this.scrollToCursor()})}COMMAND_TYPE_SAVE(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("workbench.action.files.save")})}COMMAND_TYPE_SPLIT(e){return i(this,void 0,void 0,function*(){yield this.focus();const t=e.direction.toLowerCase(),n=t.charAt(0).toUpperCase()+t.slice(1);yield o.commands.executeCommand(`workbench.action.splitEditor${n}`),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_STYLE(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("editor.action.formatDocument"),yield this.uiDelay()})}COMMAND_TYPE_SWITCH_TAB(e){return i(this,void 0,void 0,function*(){yield this.focus(),e.index<0?yield o.commands.executeCommand("workbench.action.lastEditorInGroup"):yield o.commands.executeCommand(`workbench.action.openEditorAtIndex${e.index}`),yield this.uiDelay(),this.updateActiveEditor()})}COMMAND_TYPE_UNDO(e){return i(this,void 0,void 0,function*(){yield this.focus(),yield o.commands.executeCommand("undo"),yield this.scrollToCursor()})}COMMAND_TYPE_WINDOW(e){return i(this,void 0,void 0,function*(){yield this.focus();const t=e.direction.toLowerCase(),n=t.charAt(0).toUpperCase()+t.slice(1);yield o.commands.executeCommand(`workspace.action.focus${n}Group`),yield this.uiDelay(),this.updateActiveEditor()})}}},function(e,t,n){e.exports=p,p.Minimatch=g;var i={sep:"/"};try{i=n(2)}catch(e){}var r=p.GLOBSTAR=g.GLOBSTAR={},s=n(22),o={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",h=a+"*?",c="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",l="(?:(?!(?:\\/|^)\\.).)*?",f="().*{}+?[]^$\\!".split("").reduce(function(e,t){return e[t]=!0,e},{});var u=/\/+/;function d(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function p(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new g(t,n).match(e))}function g(e,t){if(!(this instanceof g))return new g(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function _(e,t){if(t||(t=this instanceof g?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:s(e)}p.filter=function(e,t){return t=t||{},function(n,i,r){return p(n,e,t)}},p.defaults=function(e){if(!e||!Object.keys(e).length)return p;var t=p,n=function(n,i,r){return t.minimatch(n,i,d(e,r))};return n.Minimatch=function(n,i){return new t.Minimatch(n,d(e,i))},n},g.defaults=function(e){return e&&Object.keys(e).length?p.defaults(e).Minimatch:g},g.prototype.debug=function(){},g.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map(function(e){return e.split(u)}),this.debug(this.pattern,n),n=n.map(function(e,t,n){return e.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,n),this.set=n},g.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,i=0;if(n.nonegate)return;for(var r=0,s=e.length;r<s&&"!"===e.charAt(r);r++)t=!t,i++;i&&(this.pattern=e.substr(i));this.negate=t},p.braceExpand=function(e,t){return _(e,t)},g.prototype.braceExpand=_,g.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return r;if(""===e)return"";var i,s="",c=!!n.nocase,l=!1,u=[],d=[],p=!1,g=-1,_=-1,v="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function b(){if(i){switch(i){case"*":s+=h,c=!0;break;case"?":s+=a,c=!0;break;default:s+="\\"+i}y.debug("clearStateChar %j %j",i,s),i=!1}}for(var w,x=0,E=e.length;x<E&&(w=e.charAt(x));x++)if(this.debug("%s\t%s %s %j",e,x,s,w),l&&f[w])s+="\\"+w,l=!1;else switch(w){case"/":return!1;case"\\":b(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,x,s,w),p){this.debug("  in class"),"!"===w&&x===_+1&&(w="^"),s+=w;continue}y.debug("call clearStateChar %j",i),b(),i=w,n.noext&&b();continue;case"(":if(p){s+="(";continue}if(!i){s+="\\(";continue}u.push({type:i,start:x-1,reStart:s.length,open:o[i].open,close:o[i].close}),s+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,s),i=!1;continue;case")":if(p||!u.length){s+="\\)";continue}b(),c=!0;var S=u.pop();s+=S.close,"!"===S.type&&d.push(S),S.reEnd=s.length;continue;case"|":if(p||!u.length||l){s+="\\|",l=!1;continue}b(),s+="|";continue;case"[":if(b(),p){s+="\\"+w;continue}p=!0,_=x,g=s.length,s+=w;continue;case"]":if(x===_+1||!p){s+="\\"+w,l=!1;continue}if(p){var k=e.substring(_+1,x);try{RegExp("["+k+"]")}catch(e){var C=this.parse(k,m);s=s.substr(0,g)+"\\["+C[0]+"\\]",c=c||C[1],p=!1;continue}}c=!0,p=!1,s+=w;continue;default:b(),l?l=!1:!f[w]||"^"===w&&p||(s+="\\"),s+=w}p&&(k=e.substr(_+1),C=this.parse(k,m),s=s.substr(0,g)+"\\["+C[0],c=c||C[1]);for(S=u.pop();S;S=u.pop()){var T=s.slice(S.reStart+S.open.length);this.debug("setting tail",s,S),T=T.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,n){return n||(n="\\"),t+t+n+"|"}),this.debug("tail=%j\n   %s",T,T,S,s);var M="*"===S.type?h:"?"===S.type?a:"\\"+S.type;c=!0,s=s.slice(0,S.reStart)+M+"\\("+T}b(),l&&(s+="\\\\");var O=!1;switch(s.charAt(0)){case".":case"[":case"(":O=!0}for(var D=d.length-1;D>-1;D--){var A=d[D],N=s.slice(0,A.reStart),P=s.slice(A.reStart,A.reEnd-8),L=s.slice(A.reEnd-8,A.reEnd),R=s.slice(A.reEnd);L+=R;var B=N.split("(").length-1,I=R;for(x=0;x<B;x++)I=I.replace(/\)[+*?]?/,"");var j="";""===(R=I)&&t!==m&&(j="$"),s=N+P+R+j+L}""!==s&&c&&(s="(?=.)"+s);O&&(s=v+s);if(t===m)return[s,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var U=n.nocase?"i":"";try{var F=new RegExp("^"+s+"$",U)}catch(e){return new RegExp("$.")}return F._glob=e,F._src=s,F};var m={};p.makeRe=function(e,t){return new g(e,t||{}).makeRe()},g.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?h:t.dot?c:l,i=t.nocase?"i":"",s=e.map(function(e){return e.map(function(e){return e===r?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src}).join("\\/")}).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch(e){this.regexp=!1}return this.regexp},p.match=function(e,t,n){var i=new g(t,n=n||{});return e=e.filter(function(e){return i.match(e)}),i.options.nonull&&!e.length&&e.push(t),e},g.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/"));e=e.split(u),this.debug(this.pattern,"split",e);var r,s,o=this.set;for(this.debug(this.pattern,"set",o),s=e.length-1;s>=0&&!(r=e[s]);s--);for(s=0;s<o.length;s++){var a=o[s],h=e;if(n.matchBase&&1===a.length&&(h=[r]),this.matchOne(h,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},g.prototype.matchOne=function(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,h=t.length;s<a&&o<h;s++,o++){this.debug("matchOne loop");var c,l=t[o],f=e[s];if(this.debug(t,l,f),!1===l)return!1;if(l===r){this.debug("GLOBSTAR",[t,l,f]);var u=s,d=o+1;if(d===h){for(this.debug("** at the end");s<a;s++)if("."===e[s]||".."===e[s]||!i.dot&&"."===e[s].charAt(0))return!1;return!0}for(;u<a;){var p=e[u];if(this.debug("\nglobstar while",e,u,t,d,p),this.matchOne(e.slice(u),t.slice(d),n))return this.debug("globstar found match!",u,a,p),!0;if("."===p||".."===p||!i.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,u,t,d);break}this.debug("globstar swallow a segment, and continue"),u++}return!(!n||(this.debug("\n>>> no match, partial?",e,u,t,d),u!==a))}if("string"==typeof l?(c=i.nocase?f.toLowerCase()===l.toLowerCase():f===l,this.debug("string match",l,f,c)):(c=f.match(l),this.debug("pattern match",l,f,c)),!c)return!1}if(s===a&&o===h)return!0;if(s===a)return n;if(o===h)return s===a-1&&""===e[s];throw new Error("wtf?")}},function(e,t,n){var i=n(23),r=n(24);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var s=[];var o=r("{","}",t);if(!o||/\$$/.test(o.pre))return[t];var h=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var f=h||c;var _=o.body.indexOf(",")>=0;if(!f&&!_)return o.post.match(/,.*\}/)?(t=o.pre+"{"+o.body+a+o.post,e(t)):[t];var m;if(f)m=o.body.split(/\.\./);else{if(1===(m=function e(t){if(!t)return[""];var n=[];var i=r("{","}",t);if(!i)return t.split(",");var s=i.pre;var o=i.body;var a=i.post;var h=s.split(",");h[h.length-1]+="{"+o+"}";var c=e(a);a.length&&(h[h.length-1]+=c.shift(),h.push.apply(h,c));n.push.apply(n,h);return n}(o.body)).length)if(1===(m=e(m[0],!1).map(u)).length)return(y=o.post.length?e(o.post,!1):[""]).map(function(e){return o.pre+m[0]+e})}var v=o.pre;var y=o.post.length?e(o.post,!1):[""];var b;if(f){var w=l(m[0]),x=l(m[1]),E=Math.max(m[0].length,m[1].length),S=3==m.length?Math.abs(l(m[2])):1,k=p;x<w&&(S*=-1,k=g);var C=m.some(d);b=[];for(var T=w;k(T,x);T+=S){var M;if(c)"\\"===(M=String.fromCharCode(T))&&(M="");else if(M=String(T),C){var O=E-M.length;if(O>0){var D=new Array(O+1).join("0");M=T<0?"-"+D+M.slice(1):D+M}}b.push(M)}}else b=i(m,function(t){return e(t,!1)});for(var A=0;A<b.length;A++)for(var N=0;N<y.length;N++){var P=v+b[A]+y[N];(!n||f||P)&&s.push(P)}return s}(function(e){return e.split("\\\\").join(s).split("\\{").join(o).split("\\}").join(a).split("\\,").join(h).split("\\.").join(c)}(e),!0).map(f)};var s="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",h="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function f(e){return e.split(s).join("\\").split(o).join("{").split(a).join("}").split(h).join(",").split(c).join(".")}function u(e){return"{"+e+"}"}function d(e){return/^-?0\d/.test(e)}function p(e,t){return e<=t}function g(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var i=[],r=0;r<e.length;r++){var s=t(e[r],r);n(s)?i.push.apply(i,s):i.push(s)}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function i(e,t,n){e instanceof RegExp&&(e=r(e,n)),t instanceof RegExp&&(t=r(t,n));var i=s(e,t,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+e.length,i[1]),post:n.slice(i[1]+t.length)}}function r(e,t){var n=t.match(e);return n?n[0]:null}function s(e,t,n){var i,r,s,o,a,h=n.indexOf(e),c=n.indexOf(t,h+1),l=h;if(h>=0&&c>0){for(i=[],s=n.length;l>=0&&!a;)l==h?(i.push(l),h=n.indexOf(e,l+1)):1==i.length?a=[i.pop(),c]:((r=i.pop())<s&&(s=r,o=c),c=n.indexOf(t,l+1)),l=h<c&&h>=0?h:c;i.length&&(a=[s,o])}return a}e.exports=i,i.range=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{h(i.next(e))}catch(e){s(e)}}function a(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}h((i=i.apply(e,t||[])).next())})},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(7));t.default=class{constructor(e){this.settings=e}COMMAND_TYPE_DEBUGGER_CONTINUE(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_INLINE_BREAKPOINT(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_PAUSE(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_SHOW_HOVER(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_START(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_STEP_INTO(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_STEP_OUT(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_STEP_OVER(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_STOP(e){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_DEBUGGER_TOGGLE_BREAKPOINT(e){return i(this,void 0,void 0,function*(){})}pasteText(e,t,n){let i=t.cursor||0,r=0,s=t.direction||"inline";if(!t.direction&&n.endsWith("\n")&&(s="below"),"above"!=s&&"below"!=s||n.endsWith("\n")||(n+="\n"),"below"===s){for(r--;i<e.length;i++)if("\n"===e[i]){i++;break}}else if("above"===s)for("\n"===e[i]&&i>0&&i--;i>=0;i--)if("\n"===e[i]){i++;break}this.updateEditor(e.substring(0,i)+n+e.substring(i),i+n.length+r)}uiDelay(e=100){return i(this,void 0,void 0,function*(){return new Promise(t=>{setTimeout(()=>{t()},e)})})}updateEditor(e,t){return i(this,void 0,void 0,function*(){yield this.focus();const n=this.getActiveEditorText()||"";e=e||"";let[r,o]=s.cursorToRowAndColumn(e,t);if(!this.settings.getAnimations())return this.setSourceAndCursor(n,e,r,o),yield this.scrollToCursor(),Promise.resolve();let a=s.diff(n,e);0==a.length&&(a=[new s.DiffRange(s.DiffRangeType.Add,s.DiffHighlightType.Line,new s.DiffPoint(r,0),new s.DiffPoint(r+1,0))]);const h=a.filter(e=>e.diffRangeType==s.DiffRangeType.Add),c=a.filter(e=>e.diffRangeType==s.DiffRangeType.Delete),l=this.highlightRanges(c);return new Promise(t=>{setTimeout(()=>i(this,void 0,void 0,function*(){this.setSourceAndCursor(n,e,r,o),this.highlightRanges(h),yield this.scrollToCursor(),t()}),c.length>0?l:1)})})}COMMAND_TYPE_DIFF(e){return i(this,void 0,void 0,function*(){yield this.updateEditor(e.source,e.cursor)})}COMMAND_TYPE_SELECT(e){return i(this,void 0,void 0,function*(){const[t,n]=s.cursorToRowAndColumn(e.source,e.cursor),[i,r]=s.cursorToRowAndColumn(e.source,e.cursorEnd);this.select(t,n,i,r)})}}},function(e,t){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};n.Diff=function(e,t){this[0]=e,this[1]=t},n.Diff.prototype.length=2,n.Diff.prototype.toString=function(){return this[0]+","+this[1]},n.prototype.diff_main=function(e,t,i,r){if(void 0===r&&(r=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==e||null==t)throw Error("Null input. (diff_main)");if(e==t)return e?[new n.Diff(0,e)]:[];void 0===i&&(i=!0);var s=i,o=this.diff_commonPrefix(e,t);i=e.substring(0,o),e=e.substring(o),t=t.substring(o),o=this.diff_commonSuffix(e,t);var a=e.substring(e.length-o);return e=e.substring(0,e.length-o),t=t.substring(0,t.length-o),e=this.diff_compute_(e,t,s,r),i&&e.unshift(new n.Diff(0,i)),a&&e.push(new n.Diff(0,a)),this.diff_cleanupMerge(e),e},n.prototype.diff_compute_=function(e,t,i,r){if(!e)return[new n.Diff(1,t)];if(!t)return[new n.Diff(-1,e)];var s=e.length>t.length?e:t,o=e.length>t.length?t:e,a=s.indexOf(o);return-1!=a?(i=[new n.Diff(1,s.substring(0,a)),new n.Diff(0,o),new n.Diff(1,s.substring(a+o.length))],e.length>t.length&&(i[0][0]=i[2][0]=-1),i):1==o.length?[new n.Diff(-1,e),new n.Diff(1,t)]:(s=this.diff_halfMatch_(e,t))?(t=s[1],o=s[3],e=s[4],s=this.diff_main(s[0],s[2],i,r),i=this.diff_main(t,o,i,r),s.concat([new n.Diff(0,e)],i)):i&&100<e.length&&100<t.length?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},n.prototype.diff_lineMode_=function(e,t,i){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2,r=r.lineArray,e=this.diff_main(e,t,!1,i),this.diff_charsToLines_(e,r),this.diff_cleanupSemantic(e),e.push(new n.Diff(0,""));for(var s=r=t=0,o="",a="";t<e.length;){switch(e[t][0]){case 1:s++,a+=e[t][1];break;case-1:r++,o+=e[t][1];break;case 0:if(1<=r&&1<=s){for(e.splice(t-r-s,r+s),t=t-r-s,s=(r=this.diff_main(o,a,!1,i)).length-1;0<=s;s--)e.splice(t,0,r[s]);t+=r.length}r=s=0,a=o=""}t++}return e.pop(),e},n.prototype.diff_bisect_=function(e,t,i){for(var r=e.length,s=t.length,o=Math.ceil((r+s)/2),a=2*o,h=Array(a),c=Array(a),l=0;l<a;l++)h[l]=-1,c[l]=-1;h[o+1]=0,c[o+1]=0;for(var f=0!=(l=r-s)%2,u=0,d=0,p=0,g=0,_=0;_<o&&!((new Date).getTime()>i);_++){for(var m=-_+u;m<=_-d;m+=2){for(var v=o+m,y=m==-_||m!=_&&h[v-1]<h[v+1]?h[v+1]:h[v-1]+1,b=y-m;y<r&&b<s&&e.charAt(y)==t.charAt(b);)y++,b++;if(h[v]=y,y>r)d+=2;else if(b>s)u+=2;else if(f&&(0<=(v=o+l-m)&&v<a&&-1!=c[v])){var w=r-c[v];if(y>=w)return this.diff_bisectSplit_(e,t,y,b,i)}}for(m=-_+p;m<=_-g;m+=2){for(v=o+m,y=(w=m==-_||m!=_&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1)-m;w<r&&y<s&&e.charAt(r-w-1)==t.charAt(s-y-1);)w++,y++;if(c[v]=w,w>r)g+=2;else if(y>s)p+=2;else if(!f&&(0<=(v=o+l-m)&&v<a&&-1!=h[v]&&(b=o+(y=h[v])-v,y>=(w=r-w))))return this.diff_bisectSplit_(e,t,y,b,i)}}return[new n.Diff(-1,e),new n.Diff(1,t)]},n.prototype.diff_bisectSplit_=function(e,t,n,i,r){var s=e.substring(0,n),o=t.substring(0,i);return e=e.substring(n),t=t.substring(i),s=this.diff_main(s,o,!1,r),r=this.diff_main(e,t,!1,r),s.concat(r)},n.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,o=-1,a=i.length;o<e.length-1;){-1==(o=e.indexOf("\n",n))&&(o=e.length-1);var h=e.substring(n,o+1);(r.hasOwnProperty?r.hasOwnProperty(h):void 0!==r[h])?t+=String.fromCharCode(r[h]):(a==s&&(h=e.substring(n),o=e.length),t+=String.fromCharCode(a),r[h]=a,i[a++]=h),n=o+1}return t}var i=[],r={};i[0]="";var s=4e4,o=n(e);return s=65535,{chars1:o,chars2:n(t),lineArray:i}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],s=0;s<i.length;s++)r[s]=t[i.charCodeAt(s)];e[n][1]=r.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,s=0;n<r;)e.substring(s,r)==t.substring(s,r)?s=n=r:i=r,r=Math.floor((i-n)/2+n);return r},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,s=0;n<r;)e.substring(e.length-r,e.length-s)==t.substring(t.length-r,t.length-s)?s=n=r:i=r,r=Math.floor((i-n)/2+n);return r},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;if(n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n)),n=Math.min(n,i),e==t)return n;i=0;for(var r=1;;){var s=e.substring(n-r);if(-1==(s=t.indexOf(s)))return i;r+=s,0!=s&&e.substring(n-r)!=t.substring(0,r)||(i=r,r++)}},n.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var i,r,o,a,h=e.substring(n,n+Math.floor(e.length/4)),c=-1,l="";-1!=(c=t.indexOf(h,c+1));){var f=s.diff_commonPrefix(e.substring(n),t.substring(c)),u=s.diff_commonSuffix(e.substring(0,n),t.substring(0,c));l.length<u+f&&(l=t.substring(c-u,c)+t.substring(c,c+f),i=e.substring(0,n-u),r=e.substring(n+f),o=t.substring(0,c-u),a=t.substring(c+f))}return 2*l.length>=e.length?[i,r,o,a,l]:null}if(0>=this.Diff_Timeout)return null;var i=e.length>t.length?e:t,r=e.length>t.length?t:e;if(4>i.length||2*r.length<i.length)return null;var s=this,o=n(i,r,Math.ceil(i.length/4));if(i=n(i,r,Math.ceil(i.length/2)),!o&&!i)return null;if(o=i?o&&o[4].length>i[4].length?o:i:o,e.length>t.length){i=o[0],r=o[1];var a=o[2],h=o[3]}else a=o[0],h=o[1],i=o[2],r=o[3];return[i,r,a,h,o[4]]},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,i=[],r=0,s=null,o=0,a=0,h=0,c=0,l=0;o<e.length;)0==e[o][0]?(i[r++]=o,a=c,h=l,l=c=0,s=e[o][1]):(1==e[o][0]?c+=e[o][1].length:l+=e[o][1].length,s&&s.length<=Math.max(a,h)&&s.length<=Math.max(c,l)&&(e.splice(i[r-1],0,new n.Diff(-1,s)),e[i[r-1]+1][0]=1,r--,o=0<--r?i[r-1]:-1,l=c=h=a=0,s=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;)-1==e[o-1][0]&&1==e[o][0]&&(t=e[o-1][1],i=e[o][1],(r=this.diff_commonOverlap_(t,i))>=(s=this.diff_commonOverlap_(i,t))?(r>=t.length/2||r>=i.length/2)&&(e.splice(o,0,new n.Diff(0,i.substring(0,r))),e[o-1][1]=t.substring(0,t.length-r),e[o+1][1]=i.substring(r),o++):(s>=t.length/2||s>=i.length/2)&&(e.splice(o,0,new n.Diff(0,t.substring(0,s))),e[o-1][0]=1,e[o-1][1]=i.substring(0,i.length-s),e[o+1][0]=-1,e[o+1][1]=t.substring(s),o++),o++),o++},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var i=e.charAt(e.length-1),r=t.charAt(0),s=i.match(n.nonAlphaNumericRegex_),o=r.match(n.nonAlphaNumericRegex_),a=s&&i.match(n.whitespaceRegex_),h=o&&r.match(n.whitespaceRegex_);i=a&&i.match(n.linebreakRegex_),r=h&&r.match(n.linebreakRegex_);var c=i&&e.match(n.blanklineEndRegex_),l=r&&t.match(n.blanklineStartRegex_);return c||l?5:i||r?4:s&&!a&&h?3:a||h?2:s||o?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var r=e[i-1][1],s=e[i][1],o=e[i+1][1],a=this.diff_commonSuffix(r,s);if(a){var h=s.substring(s.length-a);r=r.substring(0,r.length-a),s=h+s.substring(0,s.length-a),o=h+o}a=r,h=s;for(var c=o,l=t(r,s)+t(s,o);s.charAt(0)===o.charAt(0);){r+=s.charAt(0),s=s.substring(1)+o.charAt(0),o=o.substring(1);var f=t(r,s)+t(s,o);f>=l&&(l=f,a=r,h=s,c=o)}e[i-1][1]!=a&&(a?e[i-1][1]=a:(e.splice(i-1,1),i--),e[i][1]=h,c?e[i+1][1]=c:(e.splice(i+1,1),i--))}i++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,i=[],r=0,s=null,o=0,a=!1,h=!1,c=!1,l=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(c||l)?(i[r++]=o,a=c,h=l,s=e[o][1]):(r=0,s=null),c=l=!1):(-1==e[o][0]?l=!0:c=!0,s&&(a&&h&&c&&l||s.length<this.Diff_EditCost/2&&3==a+h+c+l)&&(e.splice(i[r-1],0,new n.Diff(-1,s)),e[i[r-1]+1][0]=1,r--,s=null,a&&h?(c=l=!0,r=0):(o=0<--r?i[r-1]:-1,c=l=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push(new n.Diff(0,""));for(var t,i=0,r=0,s=0,o="",a="";i<e.length;)switch(e[i][0]){case 1:s++,a+=e[i][1],i++;break;case-1:r++,o+=e[i][1],i++;break;case 0:1<r+s?(0!==r&&0!==s&&(0!==(t=this.diff_commonPrefix(a,o))&&(0<i-r-s&&0==e[i-r-s-1][0]?e[i-r-s-1][1]+=a.substring(0,t):(e.splice(0,0,new n.Diff(0,a.substring(0,t))),i++),a=a.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(a,o))&&(e[i][1]=a.substring(a.length-t)+e[i][1],a=a.substring(0,a.length-t),o=o.substring(0,o.length-t))),i-=r+s,e.splice(i,r+s),o.length&&(e.splice(i,0,new n.Diff(-1,o)),i++),a.length&&(e.splice(i,0,new n.Diff(1,a)),i++),i++):0!==i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,r=s=0,a=o=""}for(""===e[e.length-1][1]&&e.pop(),r=!1,i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),r=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),r=!0)),i++;r&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,i=0,r=0,s=0,o=0;for(n=0;n<e.length&&(1!==e[n][0]&&(i+=e[n][1].length),-1!==e[n][0]&&(r+=e[n][1].length),!(i>t));n++)s=i,o=r;return e.length!=n&&-1===e[n][0]?o:o+(t-s)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,r=/>/g,s=/\n/g,o=0;o<e.length;o++){var a=e[o][0],h=e[o][1].replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(s,"&para;<br>");switch(a){case 1:t[o]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case-1:t[o]='<del style="background:#ffe6e6;">'+h+"</del>";break;case 0:t[o]="<span>"+h+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var s=e[r][1];switch(e[r][0]){case 1:n+=s.length;break;case-1:i+=s.length;break;case 0:t+=Math.max(n,i),i=n=0}}return t+Math.max(n,i)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var i=[],r=0,s=0,o=t.split(/\t/g),a=0;a<o.length;a++){var h=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{i[r++]=new n.Diff(1,decodeURI(h))}catch(e){throw Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var c=parseInt(h,10);if(isNaN(c)||0>c)throw Error("Invalid number in diff_fromDelta: "+h);h=e.substring(s,s+=c),"="==o[a].charAt(0)?i[r++]=new n.Diff(0,h):i[r++]=new n.Diff(-1,h);break;default:if(o[a])throw Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(s!=e.length)throw Error("Delta length ("+s+") does not equal source text length ("+e.length+").");return i},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){function i(e,i){var r=e/t.length,o=Math.abs(n-i);return s.Match_Distance?r+o/s.Match_Distance:o?1:r}if(t.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),s=this,o=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(o=Math.min(i(0,a),o),-1!=(a=e.lastIndexOf(t,n+t.length))&&(o=Math.min(i(0,a),o)));var h=1<<t.length-1;a=-1;for(var c,l,f,u=t.length+e.length,d=0;d<t.length;d++){for(c=0,l=u;c<l;)i(d,n+l)<=o?c=l:u=l,l=Math.floor((u-c)/2+c);u=l,c=Math.max(1,n-l+1);var p=Math.min(n+l,e.length)+t.length;for((l=Array(p+2))[p+1]=(1<<d)-1;p>=c;p--){var g=r[e.charAt(p-1)];if(l[p]=0===d?(l[p+1]<<1|1)&g:(l[p+1]<<1|1)&g|(f[p+1]|f[p])<<1|1|f[p+1],l[p]&h&&(g=i(d,p-1))<=o){if(o=g,!((a=p-1)>n))break;c=Math.max(1,2*n-a)}}if(i(d+1,n)>o)break;f=l}return a},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var i=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(i)!=t.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,i=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin,(i=t.substring(e.start2-r,e.start2))&&e.diffs.unshift(new n.Diff(0,i)),(r=t.substring(e.start2+e.length1,e.start2+e.length1+r))&&e.diffs.push(new n.Diff(0,r)),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+r.length,e.length2+=i.length+r.length}},n.prototype.patch_make=function(e,t,i){if("string"==typeof e&&"string"==typeof t&&void 0===i){var r=e;2<(t=this.diff_main(r,t,!0)).length&&(this.diff_cleanupSemantic(t),this.diff_cleanupEfficiency(t))}else if(e&&"object"==typeof e&&void 0===t&&void 0===i)t=e,r=this.diff_text1(t);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===i)r=e;else{if("string"!=typeof e||"string"!=typeof t||!i||"object"!=typeof i)throw Error("Unknown call format to patch_make.");r=e,t=i}if(0===t.length)return[];i=[],e=new n.patch_obj;for(var s=0,o=0,a=0,h=r,c=0;c<t.length;c++){var l=t[c][0],f=t[c][1];switch(s||0===l||(e.start1=o,e.start2=a),l){case 1:e.diffs[s++]=t[c],e.length2+=f.length,r=r.substring(0,a)+f+r.substring(a);break;case-1:e.length1+=f.length,e.diffs[s++]=t[c],r=r.substring(0,a)+r.substring(a+f.length);break;case 0:f.length<=2*this.Patch_Margin&&s&&t.length!=c+1?(e.diffs[s++]=t[c],e.length1+=f.length,e.length2+=f.length):f.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(e,h),i.push(e),e=new n.patch_obj,s=0,h=r,o=a)}1!==l&&(o+=f.length),-1!==l&&(a+=f.length)}return s&&(this.patch_addContext_(e,h),i.push(e)),i},n.prototype.patch_deepCopy=function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i],s=new n.patch_obj;s.diffs=[];for(var o=0;o<r.diffs.length;o++)s.diffs[o]=new n.Diff(r.diffs[o][0],r.diffs[o][1]);s.start1=r.start1,s.start2=r.start2,s.length1=r.length1,s.length2=r.length2,t[i]=s}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,r=[],s=0;s<e.length;s++){var o=e[s].start2+i,a=this.diff_text1(e[s].diffs),h=-1;if(a.length>this.Match_MaxBits){var c=this.match_main(t,a.substring(0,this.Match_MaxBits),o);-1!=c&&(-1==(h=this.match_main(t,a.substring(a.length-this.Match_MaxBits),o+a.length-this.Match_MaxBits))||c>=h)&&(c=-1)}else c=this.match_main(t,a,o);if(-1==c)r[s]=!1,i-=e[s].length2-e[s].length1;else if(r[s]=!0,i=c-o,a==(o=-1==h?t.substring(c,c+a.length):t.substring(c,h+this.Match_MaxBits)))t=t.substring(0,c)+this.diff_text2(e[s].diffs)+t.substring(c+a.length);else if(o=this.diff_main(a,o,!1),a.length>this.Match_MaxBits&&this.diff_levenshtein(o)/a.length>this.Patch_DeleteThreshold)r[s]=!1;else{var l;for(this.diff_cleanupSemanticLossless(o),a=0,h=0;h<e[s].diffs.length;h++){var f=e[s].diffs[h];0!==f[0]&&(l=this.diff_xIndex(o,a)),1===f[0]?t=t.substring(0,c+l)+f[1]+t.substring(c+l):-1===f[0]&&(t=t.substring(0,c+l)+t.substring(c+this.diff_xIndex(o,a+f[1].length))),-1!==f[0]&&(a+=f[1].length)}}}return[t=t.substring(n.length,t.length-n.length),r]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,i="",r=1;r<=t;r++)i+=String.fromCharCode(r);for(r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var s=(r=e[0]).diffs;if(0==s.length||0!=s[0][0])s.unshift(new n.Diff(0,i)),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>s[0][1].length){var o=t-s[0][1].length;s[0][1]=i.substring(s[0][1].length)+s[0][1],r.start1-=o,r.start2-=o,r.length1+=o,r.length2+=o}return 0==(s=(r=e[e.length-1]).diffs).length||0!=s[s.length-1][0]?(s.push(new n.Diff(0,i)),r.length1+=t,r.length2+=t):t>s[s.length-1][1].length&&(o=t-s[s.length-1][1].length,s[s.length-1][1]+=i.substring(0,o),r.length1+=o,r.length2+=o),i},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=t)){var r=e[i];e.splice(i--,1);for(var s=r.start1,o=r.start2,a="";0!==r.diffs.length;){var h=new n.patch_obj,c=!0;for(h.start1=s-a.length,h.start2=o-a.length,""!==a&&(h.length1=h.length2=a.length,h.diffs.push(new n.Diff(0,a)));0!==r.diffs.length&&h.length1<t-this.Patch_Margin;){a=r.diffs[0][0];var l=r.diffs[0][1];1===a?(h.length2+=l.length,o+=l.length,h.diffs.push(r.diffs.shift()),c=!1):-1===a&&1==h.diffs.length&&0==h.diffs[0][0]&&l.length>2*t?(h.length1+=l.length,s+=l.length,c=!1,h.diffs.push(new n.Diff(a,l)),r.diffs.shift()):(l=l.substring(0,t-h.length1-this.Patch_Margin),h.length1+=l.length,s+=l.length,0===a?(h.length2+=l.length,o+=l.length):c=!1,h.diffs.push(new n.Diff(a,l)),l==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(l.length))}a=(a=this.diff_text2(h.diffs)).substring(a.length-this.Patch_Margin),""!==(l=this.diff_text1(r.diffs).substring(0,this.Patch_Margin))&&(h.length1+=l.length,h.length2+=l.length,0!==h.diffs.length&&0===h.diffs[h.diffs.length-1][0]?h.diffs[h.diffs.length-1][1]+=l:h.diffs.push(new n.Diff(0,l))),c||e.splice(++i,0,h)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;e=e.split("\n");for(var i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<e.length;){var s=e[i].match(r);if(!s)throw Error("Invalid patch string: "+e[i]);var o=new n.patch_obj;for(t.push(o),o.start1=parseInt(s[1],10),""===s[2]?(o.start1--,o.length1=1):"0"==s[2]?o.length1=0:(o.start1--,o.length1=parseInt(s[2],10)),o.start2=parseInt(s[3],10),""===s[4]?(o.start2--,o.length2=1):"0"==s[4]?o.length2=0:(o.start2--,o.length2=parseInt(s[4],10)),i++;i<e.length;){s=e[i].charAt(0);try{var a=decodeURI(e[i].substring(1))}catch(e){throw Error("Illegal escape in patch_fromText: "+a)}if("-"==s)o.diffs.push(new n.Diff(-1,a));else if("+"==s)o.diffs.push(new n.Diff(1,a));else if(" "==s)o.diffs.push(new n.Diff(0,a));else{if("@"==s)break;if(""!==s)throw Error('Invalid patch mode "'+s+'" in: '+a)}i++}}return t},n.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},n.patch_obj.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case-1:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=n},function(e,t,n){"use strict";var i=n(3);n(2);function r(e){return"*"==e||-1!==e.indexOf(".")}function s(e){return e.filter(function(e){return"#"!==(e=e.trim()).charAt(0)&&""!==e})}function o(e){return e=e.map(function(e){if(!r(e)){var t="*"==e.slice(-1)?"*":"/**";e="/"===e.slice(-1)?[e+t]:[e,e+t]}return e}),e=(e=Array.prototype.concat.apply([],e)).map(function(e){return r(e)||"/"===e.charAt(0)?e:"**/"+e})}function a(e){return e.map(function(e){return"!"==e.charAt(0)?e.substring(1):"!"+e})}e.exports=function(e,t){e=e||".gitignore",(t=t||{}).negate=t.negate||!1;var n=i.readFileSync(e).toString().split("\n"),r=o(n=s(n));return t.negate&&(r=a(r)),r},e.exports._map=o,e.exports._prepare=s,e.exports._negate=a,e.exports._isFile=r},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{h(i.next(e))}catch(e){s(e)}}function a(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}h((i=i.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(29)),o=r(n(44));t.default=class{constructor(){this.initialized=!1}checkInstalled(){return!!this.settings.getInstalled()||(this.showInstallMessage(),!1)}destroy(){}run(){return i(this,void 0,void 0,function*(){this.initialized||(this.settings=new o.default,this.commandHandler=this.createCommandHandler(),this.ipc=new s.default(this.commandHandler,this.app()),this.ipc.start(),this.checkInstalled(),this.initialized=!0)})}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{h(i.next(e))}catch(e){s(e)}}function a(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}h((i=i.apply(e,t||[])).next())})},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(46),o=r(n(30));t.default=class{constructor(e,t){this.connected=!1,this.id="",this.url="ws://localhost:17373/",this.commandHandler=e,this.app=t,this.id=s.v4()}isConnected(){return this.connected}onClose(){this.connected=!1}onMessage(e){return i(this,void 0,void 0,function*(){if("string"==typeof e){let t;try{t=JSON.parse(e)}catch(e){return}if("response"===t.message){const e=yield this.handle(t.data.response);e&&this.send("callback",{callback:t.data.callback,data:e})}}})}onOpen(){this.connected=!0,this.sendActive()}ensureConnection(){if(!this.connected)try{"undefined"!=typeof WebSocket&&WebSocket?(this.websocket=new WebSocket(this.url),this.websocket.addEventListener("error",e=>{console.log(e)}),this.websocket.addEventListener("open",()=>{this.onOpen()}),this.websocket.addEventListener("close",()=>{this.onClose()}),this.websocket.addEventListener("message",e=>{this.onMessage(e.data)})):(this.websocket=new o.default(this.url),this.websocket.on("error",e=>{console.log(e)}),this.websocket.on("open",()=>{this.onOpen()}),this.websocket.on("close",()=>{this.onClose()}),this.websocket.on("message",e=>{this.onMessage(e)}))}catch(e){console.log(e)}}handle(e){return i(this,void 0,void 0,function*(){let t=null,n=!1;if(e.execute)for(const i of e.execute.commandsList)i.type in this.commandHandler&&(t=yield this.commandHandler[i.type](i),n=!0);return t||{message:"completed",data:{}}})}sendActive(){this.send("active",{app:this.app,id:this.id})}send(e,t){if(!this.connected||!this.websocket||1!=this.websocket.readyState)return!1;try{return this.websocket.send(JSON.stringify({message:e,data:t})),!0}catch(e){return this.connected=!1,!1}}start(){this.ensureConnection(),setInterval(()=>{this.ensureConnection()},1e3),setInterval(()=>{this.send("heartbeat",{app:this.app,id:this.id})},6e4)}}},function(e,t,n){"use strict";const i=n(8);i.createWebSocketStream=n(42),i.Server=n(43),i.Receiver=n(13),i.Sender=n(16),e.exports=i},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";(function(t){try{e.exports=n(11)(t)}catch(t){e.exports=n(37)}}).call(this,"/")},function(e,t,n){"use strict";e.exports={mask:(e,t,n,i,r)=>{for(var s=0;s<r;s++)n[i+s]=e[s]^t[3&s]},unmask:(e,t)=>{const n=e.length;for(var i=0;i<n;i++)e[i]^=t[3&i]}}},function(e,t,n){"use strict";const i=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[i]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[i])}}}},function(e,t,n){"use strict";(function(t){try{e.exports=n(11)(t)}catch(t){e.exports=n(40)}}).call(this,"/")},function(e,t,n){"use strict";e.exports=e=>{for(var t=e.length,n=0;n<t;)if(e[n]<128)n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}},function(e,t,n){"use strict";class i{constructor(e,t){this.target=t,this.type=e}}class r extends i{constructor(e,t){super("message",t),this.data=e}}class s extends i{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class o extends i{constructor(e){super("open",e)}}class a extends i{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const h={addEventListener(e,t){function n(e){t.call(this,new r(e,this))}function i(e,n){t.call(this,new s(e,n,this))}function h(e){t.call(this,new a(e,this))}function c(){t.call(this,new o(this))}"function"==typeof t&&("message"===e?(n._listener=t,this.on(e,n)):"close"===e?(i._listener=t,this.on(e,i)):"error"===e?(h._listener=t,this.on(e,h)):"open"===e?(c._listener=t,this.on(e,c)):this.on(e,t))},removeEventListener(e,t){const n=this.listeners(e);for(let i=0;i<n.length;i++)n[i]!==t&&n[i]._listener!==t||this.removeListener(e,n[i])}};e.exports=h},function(e,t,n){"use strict";const{Duplex:i}=n(14);function r(e){e.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let n=!0;function a(){n&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a)}):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a));const h=new i({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t){h.push(t)||(n=!1,e._socket.pause())}),e.once("error",function(e){h.destroyed||h.destroy(e)}),e.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(r,h);let i=!1;e.once("error",function(e){i=!0,n(e)}),e.once("close",function(){i||n(t),process.nextTick(r,h)}),e.terminate()},h._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(h._readableState.endEmitted&&h.destroy(),t()):(e._socket.once("finish",function(){t()}),e.close())):e.once("open",function(){h._final(t)})},h._read=function(){e.readyState!==e.OPEN||n||(n=!0,e._receiver._writableState.needDrain||e._socket.resume())},h._write=function(t,n,i){e.readyState!==e.CONNECTING?e.send(t,i):e.once("open",function(){h._write(t,n,i)})},h.on("end",s),h.on("error",o),h}},function(e,t,n){"use strict";const i=n(9),{createHash:r}=n(0),{createServer:s,STATUS_CODES:o}=n(10),a=n(4),h=n(8),{format:c,parse:l}=n(17),{GUID:f}=n(1),u=/^[+/0-9A-Za-z]{22}==$/,d=Symbol("kUsedByWebSocketServer");function p(e){e.emit("close")}function g(){this.destroy()}function _(e,t,n,i){e.writable&&(n=n||o[t],i={Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(n),...i},e.write(`HTTP/1.1 ${t} ${o[t]}\r\n`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",g),e.destroy()}e.exports=class extends i{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port)this._server=s((e,t)=>{const n=o[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),this._server.listen(e.port,e.host,e.backlog,t);else if(e.server){if(e.server[d])throw new Error("The HTTP/S server is already being used by another WebSocket server");e.server[d]=!0,this._server=e.server}this._server&&(this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,n)=>{this.handleUpgrade(e,t,n,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;if(t){if(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)return void t.close(()=>this.emit("close"));delete t[d]}process.nextTick(p,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,i){t.on("error",g);const r=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),s=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!r||!u.test(r)||8!==s&&13!==s||!this.shouldHandle(e))return _(t,400);if(this.options.perMessageDeflate){const n=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const i=l(e.headers["sec-websocket-extensions"]);i[a.extensionName]&&(n.accept(i[a.extensionName]),o[a.extensionName]=n)}catch(e){return _(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[`${8===s?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,(s,a,h,c)=>{if(!s)return _(t,a||401,h,c);this.completeUpgrade(r,o,e,t,n,i)});if(!this.options.verifyClient(a))return _(t,401)}this.completeUpgrade(r,o,e,t,n,i)}completeUpgrade(e,t,n,i,s,o){if(!i.readable||!i.writable)return i.destroy();const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${r("sha1").update(e+f).digest("base64")}`],u=new h(null);let d=n.headers["sec-websocket-protocol"];if(d&&(d=d.trim().split(/ *, */),(d=this.options.handleProtocols?this.options.handleProtocols(d,n):d[0])&&(l.push(`Sec-WebSocket-Protocol: ${d}`),u.protocol=d)),t[a.extensionName]){const e=t[a.extensionName].params,n=c({[a.extensionName]:[e]});l.push(`Sec-WebSocket-Extensions: ${n}`),u._extensions=t}this.emit("headers",l,n),i.write(l.concat("\r\n").join("\r\n")),i.removeListener("error",g),u.setSocket(i,s,this.options.maxPayload),this.clients&&(this.clients.add(u),u.on("close",()=>this.clients.delete(u))),o(u)}}},function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(3)),s=i(n(45)),o=i(n(12));t.default=class{constructor(){this.systemData={},this.systemDefaults={},this.userData={},this.userDefaults={}}createIfNotExists(e){s.sync(this.path()),r.existsSync(e)||r.closeSync(r.openSync(e,"w"))}dataForFile(e){return"user"==e?this.userData:"system"==e?this.systemData:void 0}defaultsForFile(e){return"user"==e?this.userDefaults:"system"==e?this.systemDefaults:void 0}get(e,t){this.load();let n=this.dataForFile(e);return void 0===n[t]?this.defaultsForFile(e)[t]:n[t]}load(){this.systemData={},this.userData={};try{this.systemData=JSON.parse(r.readFileSync(this.systemFile()).toString())}catch(e){this.systemData={}}try{this.userData=JSON.parse(r.readFileSync(this.userFile()).toString())}catch(e){this.userData={}}}save(){this.createIfNotExists(this.systemFile()),this.createIfNotExists(this.userFile()),r.writeFileSync(this.systemFile(),JSON.stringify(this.systemData)),r.writeFileSync(this.userFile(),JSON.stringify(this.userData))}set(e,t,n){this.load(),this.dataForFile(e)[t]=n,this.save()}systemFile(){return`${this.path()}/serenade.json`}userFile(){return`${this.path()}/settings.json`}getAnimations(){return this.get("user","animations")}getAtom(){return this.get("system","atom")}getCode(){return this.get("system","code")}getInstalled(){return this.get("system","installed")}path(){return`${o.homedir()}/.serenade`}setPluginInstalled(e){this.load();let t=this.dataForFile("system");t.plugins||(t.plugins=[]),t.plugins.includes(e)||t.plugins.push(e),this.save()}}},function(e,t,n){var i=n(2),r=n(3),s=parseInt("0777",8);function o(e,t,n,a){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var h=t.mode,c=t.fs||r;void 0===h&&(h=s&~process.umask()),a||(a=null);var l=n||function(){};e=i.resolve(e),c.mkdir(e,h,function(n){if(!n)return l(null,a=a||e);switch(n.code){case"ENOENT":o(i.dirname(e),t,function(n,i){n?l(n,i):o(e,t,l,i)});break;default:c.stat(e,function(e,t){e||!t.isDirectory()?l(n,a):l(null,a)})}})}e.exports=o.mkdirp=o.mkdirP=o,o.sync=function e(t,n,o){n&&"object"==typeof n||(n={mode:n});var a=n.mode,h=n.fs||r;void 0===a&&(a=s&~process.umask()),o||(o=null),t=i.resolve(t);try{h.mkdirSync(t,a),o=o||t}catch(r){switch(r.code){case"ENOENT":o=e(i.dirname(t),n,o),e(t,n,o);break;default:var c;try{c=h.statSync(t)}catch(e){throw r}if(!c.isDirectory())throw r}}return o}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i);function s(){return r.a.randomBytes(16)}for(var o=[],a=0;a<256;++a)o[a]=(a+256).toString(16).substr(1);var h,c,l=function(e,t){var n=t||0,i=o;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")},f=0,u=0;var d=function(e,t,n){var i=t&&n||0,r=t||[],o=(e=e||{}).node||h,a=void 0!==e.clockseq?e.clockseq:c;if(null==o||null==a){var d=e.random||(e.rng||s)();null==o&&(o=h=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==a&&(a=c=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,_=p-f+(g-u)/1e4;if(_<0&&void 0===e.clockseq&&(a=a+1&16383),(_<0||p>f)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=p,u=g,c=a;var m=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;r[i++]=m>>>24&255,r[i++]=m>>>16&255,r[i++]=m>>>8&255,r[i++]=255&m;var v=p/4294967296*1e4&268435455;r[i++]=v>>>8&255,r[i++]=255&v,r[i++]=v>>>24&15|16,r[i++]=v>>>16&255,r[i++]=a>>>8|128,r[i++]=255&a;for(var y=0;y<6;++y)r[i+y]=o[y];return t||l(r)};var p=function(e,t,n){var i=function(e,i,r,s){var o=r&&s||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof i&&(i=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,function(e){t.push(parseInt(e,16))}),t}(i)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(i)||16!==i.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=n(i.concat(e));if(a[6]=15&a[6]|t,a[8]=63&a[8]|128,r)for(var h=0;h<16;++h)r[o+h]=a[h];return r||l(a)};try{i.name=e}catch(e){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i};var g=p("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),r.a.createHash("md5").update(e).digest()});var _=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[i+o]=r[o];return t||l(r)};var m=p("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),r.a.createHash("sha1").update(e).digest()});n.d(t,"v1",function(){return d}),n.d(t,"v3",function(){return g}),n.d(t,"v4",function(){return _}),n.d(t,"v5",function(){return m})}]);
//# sourceMappingURL=extension.js.map